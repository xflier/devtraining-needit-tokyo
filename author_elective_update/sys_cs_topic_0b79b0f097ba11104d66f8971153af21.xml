<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cs_topic">
    <sys_cs_topic action="DELETE">
        <active>true</active>
        <applicability>true</applicability>
        <autopilot_topic>false</autopilot_topic>
        <cb_topic_id display_value="Report IT Issue">d7d6f83097ba11104d66f8971153af5c</cb_topic_id>
        <channels/>
        <definition>{"id":"d7d6f83097ba11104d66f8971153af5c","name":"Report IT Issue","system_topic":false,"autopilot_topic":false,"vendor_id":"c2f0b8f187033200246ddd4c97cb0bb9","description":"Report IT Issue","applicability":"true","categories":[],"key_phrases":["Report IT Issue","approve","reject","deny","approval"],"variables":[{"name":"approval_sysid","type":"java.lang.Object"},{"name":"count","type":"java.lang.Object","init_value":"0"},{"name":"record_updated","type":"java.lang.Object"},{"name":"results","type":"java.lang.Object"},{"name":"LiveAgent_application","type":"java.lang.Object","init_value":"\"itsm\""},{"name":"optionsCount_57a6b6ec44fc48fda889a6c44089f0e9","type":"java.lang.Object"},{"name":"optionsCount_b24246b562764a389283800bb0590f6c","type":"java.lang.Object"},{"name":"__multipart_total__33ee9f8858d84569a492d8e5bcc72766","type":"java.lang.Object"},{"name":"__multipart_idx__33ee9f8858d84569a492d8e5bcc72766","type":"java.lang.Object"},{"name":"__multipart_valid__33ee9f8858d84569a492d8e5bcc72766","type":"java.lang.Object"},{"name":"__multipart_total__2c8b38621bdf46f5896b42756d962b29","type":"java.lang.Object"},{"name":"__multipart_idx__2c8b38621bdf46f5896b42756d962b29","type":"java.lang.Object"},{"name":"__multipart_valid__2c8b38621bdf46f5896b42756d962b29","type":"java.lang.Object"},{"name":"__multipart_total__2beaa589a12649e28b7ad1f09d6ccf75","type":"java.lang.Object"},{"name":"__multipart_idx__2beaa589a12649e28b7ad1f09d6ccf75","type":"java.lang.Object"},{"name":"__multipart_valid__2beaa589a12649e28b7ad1f09d6ccf75","type":"java.lang.Object"},{"name":"__segment_trigger_f291cde6a94c45e7843728c8f68785fc_done","type":"java.lang.Object","init_value":"false"},{"name":"previous_graph_node","type":"java.lang.Object"}],"fields":[{"type":"ID","name":"my_approvals","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"dynamic_enum_list":{"name":"my_approvals","props":[{"name":"value","isItemValue":true,"isPicture":false},{"name":"label","isItemValue":false,"isPicture":false}]},"binding":{"write_to":[],"enum_list":{"expression":"(function execute() {var vaRuntimeUtil = new global.VaTopicRuntimeUtil();vaVars.optionsCount_57a6b6ec44fc48fda889a6c44089f0e9 = 0; var funcObj = {\"buildOptions\": function() {return (function execute() {\n    var options = JSON.parse(vaVars.results);   \n    options.push({'value':'cancel','label': gs.getMessage(\"I'm done\")});    \n    \n    return options;\n\n})();}};function isValid(option) {return !gs.nil(option) &amp;&amp; !gs.nil(option.value) &amp;&amp; !gs.nil(option.label);}function fixInvalid(invalidOption) {var fixedOption = {'value': 'no_data', 'label': 'no_data'};if (!gs.nil(invalidOption)) {fixedOption.value = !gs.nil(invalidOption.value) ? invalidOption.value : fixedOption.value;fixedOption.label = !gs.nil(invalidOption.label) ? invalidOption.label : fixedOption.label;}return fixedOption;}function normalizeKeys(obj){Object.keys(obj).forEach(function (key) {var k = key.toLowerCase();if (k !== key) {obj[k] = obj[key];delete obj[key];}});return (obj);}var choiceOptions = [];choiceOptions = vaRuntimeUtil.executeFunction(funcObj, 'buildOptions');var noOptions = gs.nil(choiceOptions) || choiceOptions.length==0;if (noOptions) {choiceOptions = [];}else {var invalidCount = 0;var normalizedChoiceOptions = [];for (var i = 0; i &lt; choiceOptions.length; i++) {normalizedChoiceOptions.push(normalizeKeys(choiceOptions[i]));}choiceOptions = normalizedChoiceOptions;for (var i = 0; i &lt; choiceOptions.length; i++) {if (gs.nil(choiceOptions[i].label)) {choiceOptions[i].label = choiceOptions[i].value;}}for (var i = 0; i &lt; choiceOptions.length; i++) {if (!isValid(choiceOptions[i])) {invalidCount++;choiceOptions[i] = fixInvalid(choiceOptions[i]);}}noOptions = invalidCount === choiceOptions.length;if (noOptions) {choiceOptions = [];}vaVars.optionsCount_57a6b6ec44fc48fda889a6c44089f0e9 = choiceOptions.length;return choiceOptions;}})();"}},"metadata_script":""},{"type":"String","name":"reject_comment","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"Reference","table_name":"sysapproval_approver","name":"approval_record","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[]},{"type":"Reference","table_name":"sysapproval_approver","name":"approve_record","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[]},{"type":"Reference","table_name":"","name":"reject_record","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[]},{"type":"Reference","table_name":"sys_user","name":"user","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[]},{"type":"ID","name":"approval_choice","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"dynamic_enum_list":{"name":"approval_choice","props":[{"name":"value","isItemValue":true,"isPicture":false},{"name":"label","isItemValue":false,"isPicture":false}]},"binding":{"write_to":[],"enum_list":{"expression":"(function execute() {var vaRuntimeUtil = new global.VaTopicRuntimeUtil();vaVars.optionsCount_b24246b562764a389283800bb0590f6c = 0; var funcObj = {\"buildOptions\": function() {return (function execute() {\n    var options = [];\n    options.push({'value':'approve','label': gs.getMessage('Approve')});\n    options.push({'value':'reject','label': gs.getMessage('Reject')});\n    if(parseInt(vaVars.count) &gt; 1)\n      options.push({'value':'back','label': gs.getMessage('Go back to approval list')});\n    \n    options.push({'value':'cancel','label': gs.getMessage(\"I'm done\")});\n    \n    return options;\n})()\n;}};function isValid(option) {return !gs.nil(option) &amp;&amp; !gs.nil(option.value) &amp;&amp; !gs.nil(option.label);}function fixInvalid(invalidOption) {var fixedOption = {'value': 'no_data', 'label': 'no_data'};if (!gs.nil(invalidOption)) {fixedOption.value = !gs.nil(invalidOption.value) ? invalidOption.value : fixedOption.value;fixedOption.label = !gs.nil(invalidOption.label) ? invalidOption.label : fixedOption.label;}return fixedOption;}function normalizeKeys(obj){Object.keys(obj).forEach(function (key) {var k = key.toLowerCase();if (k !== key) {obj[k] = obj[key];delete obj[key];}});return (obj);}var choiceOptions = [];choiceOptions = vaRuntimeUtil.executeFunction(funcObj, 'buildOptions');var noOptions = gs.nil(choiceOptions) || choiceOptions.length==0;if (noOptions) {choiceOptions = [];}else {var invalidCount = 0;var normalizedChoiceOptions = [];for (var i = 0; i &lt; choiceOptions.length; i++) {normalizedChoiceOptions.push(normalizeKeys(choiceOptions[i]));}choiceOptions = normalizedChoiceOptions;for (var i = 0; i &lt; choiceOptions.length; i++) {if (gs.nil(choiceOptions[i].label)) {choiceOptions[i].label = choiceOptions[i].value;}}for (var i = 0; i &lt; choiceOptions.length; i++) {if (!isValid(choiceOptions[i])) {invalidCount++;choiceOptions[i] = fixInvalid(choiceOptions[i]);}}noOptions = invalidCount === choiceOptions.length;if (noOptions) {choiceOptions = [];}vaVars.optionsCount_b24246b562764a389283800bb0590f6c = choiceOptions.length;return choiceOptions;}})();"}},"metadata_script":""},{"type":"Boolean","name":"RootDecisionBranch_0f79b0f0b9ba11104aaeaca998fbc920","unique":false,"default_value":"true","key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[]},{"type":"String","name":"__silent_CRUDAction_91bf14f855844740ab3c84a8ce66f36b","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Decision_RootDecision_8b79b0f012ba1110b7b9f3b8af146b20","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_ScriptOutputPrompt_33ee9f8858d84569a492d8e5bcc72766","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Branch_72828d25ada64e8e800945c5c20e03b9","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Branch_94991f558f0c421ebd799ac07b89b649","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Branch_e1dbce98175f4faa8a3ae08402d8d03e","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_StartGoal_f822661de2b549ad8fc26b0840a09936","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Branch_56518f66c59a4365b78f87bba4d1929b","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_TerminateGoal_035b6b73d39649bba36968565a247b1b","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Branch_87a7f2b6ab40456785342fb9b3ba2f2d","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_LibraryCall_58c3d3b3605045819dbbd8a593753be3","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_ScriptOutputPrompt_2c8b38621bdf46f5896b42756d962b29","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_ScriptedAction_9cfcd2ca78774e658dda28c553fef410","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_TextOutputPrompt_a9bd7446ac2a4352a0867be8655f612a","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_LibraryCall_3032eb944ed94a58bbf5a659318f757f","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Decision_a65f0d21e5d84b7286940b46a05a1a08","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Branch_6caf330dcaa946f8a87ad16dd5515258","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Branch_0498782b414b406f84c1970968d968d0","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_ScriptedAction_8df29b2ae9514e9d96a264a682e269dc","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_TextOutputPrompt_7fe448ca1178498c98df5015516a2c3c","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_ScriptOutputPrompt_2beaa589a12649e28b7ad1f09d6ccf75","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_LibraryCall_d53f24ece32845fb97ed60d1182d73a0","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Branch_51f4b6733ca741ef847d561fb04fde38","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Branch_RootDecisionBranch_cb79b0f033ba111030110bc4b7550320","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_CRUDAction_690afe0b102341fe970be8fa908565cf","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_LibraryCall_37b4903dcfbe4829b84885798fc10376","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Decision_7c6792fa7c9e4c7c86dd45503c50aeeb","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_TextOutputPrompt_4dc2c71409704da0a8fc4bf9d95e36e6","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_CRUDAction_b8a3dbc712ce47a194250dea4135e3c1","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Decision_6ebb189dbf9c44b28e424096bebbbebb","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_ScriptedAction_3178521af2bd4f4484a7acb7918d1966","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_LibraryCall_cee9cdf2e1fe4f18aafe14690e9a71c2","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Branch_f0940113e7544b42af6e9f44dc94993d","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_TextOutputPrompt_ddae80ae1c9c42939df50625a05df9d0","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true}],"actions":[],"tasks":[{"type":"Consumer to system","show_as_button":true,"name":"primary","description":"primary","applicability":"vaVars.__segment_trigger_f291cde6a94c45e7843728c8f68785fc_done==false &amp;&amp; true","mode":"Qmode","key_phrases":[],"greeting_msg":"vaInputs.initialize(\"user\");vaInputs.initialize(\"RootDecisionBranch_0f79b0f0b9ba11104aaeaca998fbc920\");vaInputs.initialize(\"__silent_Decision_6ebb189dbf9c44b28e424096bebbbebb\");vaInputs.initialize(\"__silent_Decision_a65f0d21e5d84b7286940b46a05a1a08\");vaInputs.initialize(\"__silent_Branch_6caf330dcaa946f8a87ad16dd5515258\");vaInputs.initialize(\"__silent_CRUDAction_690afe0b102341fe970be8fa908565cf\");vaInputs.initialize(\"__silent_Branch_RootDecisionBranch_cb79b0f033ba111030110bc4b7550320\");vaInputs.initialize(\"__silent_LibraryCall_37b4903dcfbe4829b84885798fc10376\");vaInputs.initialize(\"reject_comment\");vaInputs.initialize(\"__silent_Branch_87a7f2b6ab40456785342fb9b3ba2f2d\");vaInputs.initialize(\"__silent_ScriptedAction_3178521af2bd4f4484a7acb7918d1966\");vaInputs.initialize(\"__silent_LibraryCall_d53f24ece32845fb97ed60d1182d73a0\");vaInputs.initialize(\"approval_choice\");vaInputs.initialize(\"__silent_LibraryCall_cee9cdf2e1fe4f18aafe14690e9a71c2\");vaInputs.initialize(\"__silent_TextOutputPrompt_ddae80ae1c9c42939df50625a05df9d0\");vaInputs.initialize(\"__silent_Decision_7c6792fa7c9e4c7c86dd45503c50aeeb\");vaInputs.initialize(\"__silent_TerminateGoal_035b6b73d39649bba36968565a247b1b\");vaInputs.initialize(\"__silent_CRUDAction_91bf14f855844740ab3c84a8ce66f36b\");vaInputs.initialize(\"__silent_Branch_0498782b414b406f84c1970968d968d0\");vaInputs.initialize(\"__silent_ScriptOutputPrompt_33ee9f8858d84569a492d8e5bcc72766\");vaInputs.initialize(\"__silent_StartGoal_f822661de2b549ad8fc26b0840a09936\");vaInputs.initialize(\"__silent_Branch_56518f66c59a4365b78f87bba4d1929b\");vaInputs.initialize(\"__silent_Branch_f0940113e7544b42af6e9f44dc94993d\");vaInputs.initialize(\"__silent_LibraryCall_58c3d3b3605045819dbbd8a593753be3\");vaInputs.initialize(\"my_approvals\");vaInputs.initialize(\"__silent_ScriptedAction_9cfcd2ca78774e658dda28c553fef410\");vaInputs.initialize(\"__silent_ScriptOutputPrompt_2c8b38621bdf46f5896b42756d962b29\");vaInputs.initialize(\"__silent_TextOutputPrompt_4dc2c71409704da0a8fc4bf9d95e36e6\");vaInputs.initialize(\"__silent_Branch_51f4b6733ca741ef847d561fb04fde38\");vaInputs.initialize(\"__silent_TextOutputPrompt_7fe448ca1178498c98df5015516a2c3c\");vaInputs.initialize(\"__silent_TextOutputPrompt_a9bd7446ac2a4352a0867be8655f612a\");vaInputs.initialize(\"__silent_ScriptOutputPrompt_2beaa589a12649e28b7ad1f09d6ccf75\");vaInputs.initialize(\"__silent_Branch_94991f558f0c421ebd799ac07b89b649\");vaInputs.initialize(\"__silent_CRUDAction_b8a3dbc712ce47a194250dea4135e3c1\");vaInputs.initialize(\"__silent_Branch_72828d25ada64e8e800945c5c20e03b9\");vaInputs.initialize(\"__silent_LibraryCall_3032eb944ed94a58bbf5a659318f757f\");vaInputs.initialize(\"__silent_ScriptedAction_8df29b2ae9514e9d96a264a682e269dc\");vaInputs.initialize(\"__silent_Branch_e1dbce98175f4faa8a3ae08402d8d03e\");vaInputs.initialize(\"__silent_Decision_RootDecision_8b79b0f012ba1110b7b9f3b8af146b20\");null;","fields":[{"name":"__silent_Decision_RootDecision_8b79b0f012ba1110b7b9f3b8af146b20","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"RootDecision_for_goal_primary___RootDecision_8b79b0f012ba1110b7b9f3b8af146b20\";vaInputs.__silent_Decision_RootDecision_8b79b0f012ba1110b7b9f3b8af146b20=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"RootDecision_for_goal_primary___RootDecision_8b79b0f012ba1110b7b9f3b8af146b20\";var ackMsg=null;ackMsg=null;vaInputs.RootDecisionBranch_0f79b0f0b9ba11104aaeaca998fbc920=true;(function() {vaInputs.__silent_Branch_RootDecisionBranch_cb79b0f033ba111030110bc4b7550320.reset();})();ackMsg;"},{"name":"__silent_Branch_RootDecisionBranch_cb79b0f033ba111030110bc4b7550320","applicable":"vaVars.previous_graph_node==\"RootDecision_for_goal_primary___RootDecision_8b79b0f012ba1110b7b9f3b8af146b20\" &amp;&amp; ((vaInputs.RootDecisionBranch_0f79b0f0b9ba11104aaeaca998fbc920.getValue() == true))","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"RootDecisionBranch_cb79b0f033ba111030110bc4b7550320___RootDecisionBranch_cb79b0f033ba111030110bc4b7550320\";vaInputs.__silent_Branch_RootDecisionBranch_cb79b0f033ba111030110bc4b7550320=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"RootDecisionBranch_cb79b0f033ba111030110bc4b7550320___RootDecisionBranch_cb79b0f033ba111030110bc4b7550320\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_StartGoal_f822661de2b549ad8fc26b0840a09936.reset();})();ackMsg;"},{"name":"__silent_StartGoal_f822661de2b549ad8fc26b0840a09936","applicable":"vaVars.previous_graph_node==\"RootDecisionBranch_cb79b0f033ba111030110bc4b7550320___RootDecisionBranch_cb79b0f033ba111030110bc4b7550320\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Start___f822661de2b549ad8fc26b0840a09936\";vaInputs.__silent_StartGoal_f822661de2b549ad8fc26b0840a09936=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Start___f822661de2b549ad8fc26b0840a09936\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_ScriptedAction_3178521af2bd4f4484a7acb7918d1966.reset();})();ackMsg;"},{"name":"__silent_ScriptedAction_3178521af2bd4f4484a7acb7918d1966","applicable":"vaVars.previous_graph_node==\"Start___f822661de2b549ad8fc26b0840a09936\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Find Approvals___3178521af2bd4f4484a7acb7918d1966\";(function execute() {(function execute() {\n    /*\n     This script finds the requested approvals.\n    */\n    var count = 0;\n    var options = [];\n\n    // find where the user is the delegate.\n    var u = gs.getUserID();\n\tvar answer = new Array();\n\tvar i = 0;\n\tanswer[i++] = new String(u);\n\tvar g = new GlideRecord(\"sys_user_delegate\");\n\tg.addQuery(\"delegate\", u);\n\tg.addQuery(\"approvals\", \"true\");\n\tg.addQuery(\"starts\", \"&lt;=\", gs.daysAgo(0));\n\tg.addQuery(\"ends\", \"&gt;=\", gs.daysAgo(0));\n\tg.query();\n\twhile( g.next())\n\t\tanswer[i++] = new String(g.user);\n\n    var gr = new GlideRecordSecure('sysapproval_approver');\n    gr.addQuery('approver', answer);\n    gr.addQuery('state','requested');\n    gr.query();\n\n    count = gr.getRowCount();\n    vaVars.count = count;\n    if(count != 0) {\n        while(gr.next()) {\n            var document_record = null;\n            var short_description;\n            if (!gr.source_table.nil()) {\n                document_record = new GlideRecord(gr.source_table);\n                document_record.get( gr.document_id);\n                short_description =  document_record.short_description;\n                if (gr.source_table == 'sc_request')\n                   short_description = getReqItems(gr.document_id);\n\n            } else {\n                document_record = new GlideRecord('task');\n                document_record.get(gr.sysapproval);\n                short_description =  document_record.short_description;\n                if (document_record.sys_class_name == 'sc_request')\n                   short_description = getReqItems(gr.sysapproval);\n\n            }\n            options.push({'value': gr.getValue('sys_id'), \n                'label': short_description + ' [' + document_record.getDisplayValue() + ']'});     \n        }\n        vaVars.results = JSON.stringify(options);\n    }\n\n    function getReqItems(parent_id) {\n        var short_description = [];\n        var reqItems = new GlideRecord('sc_req_item');     \n        reqItems.addQuery('request', parent_id);\n        reqItems.query();\n        while (reqItems.next()){\n            if(!(gs.nil(reqItems.cat_item)|| gs.nil(reqItems.cat_item.getDisplayValue())))\n              short_description.push(reqItems.cat_item.getDisplayValue());\n        }\n        \n        var sd = short_description.join(', ');\n        return sd.length &lt; 60 ? sd : sd.substr(0, 60) + '...';\n    }\n    \n    return '';\n})()\n;})();vaInputs.__silent_ScriptedAction_3178521af2bd4f4484a7acb7918d1966=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Find Approvals___3178521af2bd4f4484a7acb7918d1966\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_Branch_87a7f2b6ab40456785342fb9b3ba2f2d.reset();})();(function() {vaInputs.__silent_Branch_56518f66c59a4365b78f87bba4d1929b.reset();})();(function() {vaInputs.__silent_Decision_7c6792fa7c9e4c7c86dd45503c50aeeb.reset();})();(function() {vaInputs.__silent_Branch_72828d25ada64e8e800945c5c20e03b9.reset();})();ackMsg;"},{"name":"__silent_Decision_7c6792fa7c9e4c7c86dd45503c50aeeb","applicable":"vaVars.previous_graph_node==\"Find Approvals___3178521af2bd4f4484a7acb7918d1966\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Decision___7c6792fa7c9e4c7c86dd45503c50aeeb\";vaInputs.__silent_Decision_7c6792fa7c9e4c7c86dd45503c50aeeb=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Decision___7c6792fa7c9e4c7c86dd45503c50aeeb\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_Branch_87a7f2b6ab40456785342fb9b3ba2f2d.reset();})();(function() {vaInputs.__silent_Branch_56518f66c59a4365b78f87bba4d1929b.reset();})();(function() {vaInputs.__silent_Branch_72828d25ada64e8e800945c5c20e03b9.reset();})();ackMsg;"},{"name":"__silent_Branch_87a7f2b6ab40456785342fb9b3ba2f2d","applicable":"vaVars.previous_graph_node==\"Decision___7c6792fa7c9e4c7c86dd45503c50aeeb\" &amp;&amp; (function execute() {\n    return parseInt(vaVars.count) == 0;\n})()\n","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"No Approvals___87a7f2b6ab40456785342fb9b3ba2f2d\";vaInputs.__silent_Branch_87a7f2b6ab40456785342fb9b3ba2f2d=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"No Approvals___87a7f2b6ab40456785342fb9b3ba2f2d\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_TextOutputPrompt_7fe448ca1178498c98df5015516a2c3c.reset();})();ackMsg;"},{"name":"__silent_Branch_56518f66c59a4365b78f87bba4d1929b","applicable":"vaVars.previous_graph_node==\"Decision___7c6792fa7c9e4c7c86dd45503c50aeeb\" &amp;&amp; (function execute() {\n    return parseInt(vaVars.count) &gt; 1;\n})()\n","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Multiple Approvals___56518f66c59a4365b78f87bba4d1929b\";vaInputs.__silent_Branch_56518f66c59a4365b78f87bba4d1929b=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Multiple Approvals___56518f66c59a4365b78f87bba4d1929b\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_TextOutputPrompt_a9bd7446ac2a4352a0867be8655f612a.reset();})();ackMsg;"},{"name":"__silent_Branch_72828d25ada64e8e800945c5c20e03b9","applicable":"vaVars.previous_graph_node==\"Decision___7c6792fa7c9e4c7c86dd45503c50aeeb\" &amp;&amp; (function execute() {\n    return parseInt(vaVars.count) == 1;\n})()\n","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"One Approval___72828d25ada64e8e800945c5c20e03b9\";vaInputs.__silent_Branch_72828d25ada64e8e800945c5c20e03b9=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"One Approval___72828d25ada64e8e800945c5c20e03b9\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_TextOutputPrompt_ddae80ae1c9c42939df50625a05df9d0.reset();})();ackMsg;"},{"name":"__silent_TextOutputPrompt_7fe448ca1178498c98df5015516a2c3c","applicable":"vaVars.previous_graph_node==\"No Approvals___87a7f2b6ab40456785342fb9b3ba2f2d\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"No Approval Message___7fe448ca1178498c98df5015516a2c3c\";vaInputs.__silent_TextOutputPrompt_7fe448ca1178498c98df5015516a2c3c=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"No Approval Message___7fe448ca1178498c98df5015516a2c3c\";var ackMsg=null;ackMsg=(function execute() {var textVariations = [function() { return gs.getMessageLang(\"You have no pending approvals.\", vaContext.getRequesterLang()) }];var index = Math.floor(Math.random() * textVariations.length);return textVariations[index]();})();(function() {vaInputs.__silent_LibraryCall_cee9cdf2e1fe4f18aafe14690e9a71c2.reset();})();ackMsg;","acknowledge_msg_mask_type":"NONE"},{"name":"__silent_TextOutputPrompt_a9bd7446ac2a4352a0867be8655f612a","applicable":"vaVars.previous_graph_node==\"Multiple Approvals___56518f66c59a4365b78f87bba4d1929b\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Multiple Approval Message___a9bd7446ac2a4352a0867be8655f612a\";var promptMsg=null;var applies=(function execute() {\n    return parseInt(vaVars.count) &gt; parseInt(gs.getProperty(\"com.glide.cs.picker_page_limit\", 5));\n})()\n;if(applies){}else{vaInputs.__silent_TextOutputPrompt_a9bd7446ac2a4352a0867be8655f612a=\"\";}vaInputs.__silent_TextOutputPrompt_a9bd7446ac2a4352a0867be8655f612a=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Multiple Approval Message___a9bd7446ac2a4352a0867be8655f612a\";var ackMsg=null;var applies=(function execute() {\n    return parseInt(vaVars.count) &gt; parseInt(gs.getProperty(\"com.glide.cs.picker_page_limit\", 5));\n})()\n;if(applies){ackMsg=(function execute() {var textVariations = [function() { return (function execute() {\n    return gs.getMessage('I just checked and you have {0} outstanding approvals', vaVars.count);\n})()\n }];var index = Math.floor(Math.random() * textVariations.length);return textVariations[index]();})();(function() {vaInputs.my_approvals.reset();})();}else{(function() {vaInputs.my_approvals.reset();})();ackMsg=null;}ackMsg;","acknowledge_msg_mask_type":"NONE"},{"name":"__silent_TextOutputPrompt_ddae80ae1c9c42939df50625a05df9d0","applicable":"vaVars.previous_graph_node==\"One Approval___72828d25ada64e8e800945c5c20e03b9\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"One Approval Message___ddae80ae1c9c42939df50625a05df9d0\";vaInputs.__silent_TextOutputPrompt_ddae80ae1c9c42939df50625a05df9d0=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"One Approval Message___ddae80ae1c9c42939df50625a05df9d0\";var ackMsg=null;ackMsg=(function execute() {var textVariations = [function() { return gs.getMessageLang(\"You only have one approval remaining.\", vaContext.getRequesterLang()) }];var index = Math.floor(Math.random() * textVariations.length);return textVariations[index]();})();(function() {vaInputs.__silent_ScriptedAction_9cfcd2ca78774e658dda28c553fef410.reset();})();ackMsg;","acknowledge_msg_mask_type":"NONE"},{"name":"__silent_LibraryCall_cee9cdf2e1fe4f18aafe14690e9a71c2","applicable":"vaVars.previous_graph_node==\"No Approval Message___7fe448ca1178498c98df5015516a2c3c\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Deflection: No Approvals___cee9cdf2e1fe4f18aafe14690e9a71c2\";(function execute() {(function execute() {vaSystem.invokeSubTopic('Deflection', JSON.stringify({\"type\":\"LibraryCall\",\"type\":\"LibraryCall\",\"library_topic_name\":\"Deflection\",\"library_topic_id\":\"7fb4ca055303201033cdddeeff7b12b3\",\"parameter-mappings\":[{\"parameter-name\":\"deflection_configuration\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"5292005253213010000dddeeff7b126c\"},\"metadata\":{\"type\":\"Reference\",\"list\":false,\"use_items\":false,\"table\":\"ssa_deflection_configuration\"}},{\"parameter-name\":\"deflection_pattern\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"6eb34c5253213010000dddeeff7b12be\"},\"metadata\":{\"type\":\"Reference\",\"list\":false,\"use_items\":false,\"table\":\"ssa_deflection_pattern\"}},{\"parameter-name\":\"activity_table\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"use_items\":false}},{\"parameter-name\":\"activity_ids\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"use_items\":false}}],\"return-value-mappings\":[],\"id\":\"cee9cdf2e1fe4f18aafe14690e9a71c2\",\"name\":\"Deflection: No Approvals\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}));})();})();vaInputs.__silent_LibraryCall_cee9cdf2e1fe4f18aafe14690e9a71c2=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Deflection: No Approvals___cee9cdf2e1fe4f18aafe14690e9a71c2\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_TerminateGoal_035b6b73d39649bba36968565a247b1b.reset();})();ackMsg;"},{"name":"__silent_ScriptedAction_9cfcd2ca78774e658dda28c553fef410","applicable":"vaVars.previous_graph_node==\"One Approval Message___ddae80ae1c9c42939df50625a05df9d0\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Set Approval Sys Id___9cfcd2ca78774e658dda28c553fef410\";(function execute() {(function execute() {\n    var results = JSON.parse(vaVars.results);\n    vaVars.approval_sysid = results[0].value;\n})()\n;})();vaInputs.__silent_ScriptedAction_9cfcd2ca78774e658dda28c553fef410=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Set Approval Sys Id___9cfcd2ca78774e658dda28c553fef410\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_TextOutputPrompt_4dc2c71409704da0a8fc4bf9d95e36e6.reset();})();ackMsg;"},{"name":"__silent_Decision_6ebb189dbf9c44b28e424096bebbbebb","applicable":"vaVars.previous_graph_node==\"My Approvals___ad7b1e242edb4ca793765ae60f2114ce\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Decision___6ebb189dbf9c44b28e424096bebbbebb\";vaInputs.__silent_Decision_6ebb189dbf9c44b28e424096bebbbebb=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Decision___6ebb189dbf9c44b28e424096bebbbebb\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_Branch_f0940113e7544b42af6e9f44dc94993d.reset();})();(function() {vaInputs.__silent_Branch_e1dbce98175f4faa8a3ae08402d8d03e.reset();})();ackMsg;"},{"name":"__silent_Branch_e1dbce98175f4faa8a3ae08402d8d03e","applicable":"vaVars.previous_graph_node==\"Decision___6ebb189dbf9c44b28e424096bebbbebb\" &amp;&amp; (function execute() {\n    return vaVars.count &gt; 0 &amp;&amp; vaInputs.my_approvals != 'cancel';\n})()","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Approval___e1dbce98175f4faa8a3ae08402d8d03e\";vaInputs.__silent_Branch_e1dbce98175f4faa8a3ae08402d8d03e=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Approval___e1dbce98175f4faa8a3ae08402d8d03e\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_ScriptedAction_8df29b2ae9514e9d96a264a682e269dc.reset();})();ackMsg;"},{"name":"__silent_Branch_f0940113e7544b42af6e9f44dc94993d","applicable":"vaVars.previous_graph_node==\"Decision___6ebb189dbf9c44b28e424096bebbbebb\" &amp;&amp; (function execute() {\n    return vaVars.count != '0' &amp;&amp; vaInputs.my_approvals == 'cancel';\n})()\n","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Cancel___f0940113e7544b42af6e9f44dc94993d\";vaInputs.__silent_Branch_f0940113e7544b42af6e9f44dc94993d=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Cancel___f0940113e7544b42af6e9f44dc94993d\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_LibraryCall_58c3d3b3605045819dbbd8a593753be3.reset();})();ackMsg;"},{"name":"__silent_CRUDAction_b8a3dbc712ce47a194250dea4135e3c1","applicable":"vaVars.previous_graph_node==\"Acknowledge Message___4dc2c71409704da0a8fc4bf9d95e36e6\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Approval Record___b8a3dbc712ce47a194250dea4135e3c1\";(function execute() {(function execute() {vaInputs.initialize(\"approval_record\");\nvar gr = new GlideRecord(\"sysapproval_approver\");\ngr.initialize();\ngr.addEncodedQuery(\"sys_id=\" + vaVars.approval_sysid);\ngr.query();\nif (gr.next())\nvaInputs.approval_record = gr;})();})();vaInputs.__silent_CRUDAction_b8a3dbc712ce47a194250dea4135e3c1=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Approval Record___b8a3dbc712ce47a194250dea4135e3c1\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_ScriptOutputPrompt_33ee9f8858d84569a492d8e5bcc72766.reset();})();ackMsg;"},{"name":"__silent_TextOutputPrompt_4dc2c71409704da0a8fc4bf9d95e36e6","applicable":"(vaVars.previous_graph_node==\"Set Approval Sys Id___9cfcd2ca78774e658dda28c553fef410\" || vaVars.previous_graph_node==\"Set Approval Sys Id___8df29b2ae9514e9d96a264a682e269dc\")","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Acknowledge Message___4dc2c71409704da0a8fc4bf9d95e36e6\";vaInputs.__silent_TextOutputPrompt_4dc2c71409704da0a8fc4bf9d95e36e6=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Acknowledge Message___4dc2c71409704da0a8fc4bf9d95e36e6\";var ackMsg=null;ackMsg=(function execute() {var textVariations = [function() { return gs.getMessageLang(\"Here's more information on your approval.\", vaContext.getRequesterLang()) }];var index = Math.floor(Math.random() * textVariations.length);return textVariations[index]();})();(function() {vaInputs.__silent_CRUDAction_b8a3dbc712ce47a194250dea4135e3c1.reset();})();ackMsg;","acknowledge_msg_mask_type":"NONE"},{"name":"__silent_ScriptOutputPrompt_33ee9f8858d84569a492d8e5bcc72766","applicable":"vaVars.previous_graph_node==\"Approval Record___b8a3dbc712ce47a194250dea4135e3c1\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Display Task___33ee9f8858d84569a492d8e5bcc72766\";vaInputs.__silent_ScriptOutputPrompt_33ee9f8858d84569a492d8e5bcc72766=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Display Task___33ee9f8858d84569a492d8e5bcc72766\";var ackMsg=null;ackMsg=(function execute() {\n   return (function execute() { \n\n      var fieldList;\n      var title;\n      var reqItemFields = [];      \n      var gr = vaInputs.approval_record;\n      var source_table;\n      var approval_for_record = null;\n      if ( !gr.source_table.nil()) {\n          source_table = gr.source_table;\n          approval_for_record = new GlideRecord(gr.source_table);\n          approval_for_record.get( gr.document_id);\n      } else {\n          approval_for_record = new GlideRecord('task');\n          approval_for_record.get(gr.sysapproval);\n          source_table = gr.sysapproval.sys_class_name;\n      }\n      \n      if (source_table == 'change_request')\n        fieldList = ['type', 'risk', 'cmdb_ci', 'business_service', 'assignment_group', 'short_description', 'start_date','end_date','category'];\n      \n      else if (source_table == 'sc_request') {\n        fieldList = ['price', 'due_date', 'opened_by'];\n        reqItemFields = getRequestedItems(approval_for_record.getUniqueValue());\n        \n      } else if (source_table == 'kb_knowledge')\n          fieldList = ['kb_knowledge_base', 'kb_category', 'short_description', 'valid_to','author','source'];\n      \n      else if (!gs.nil(approval_for_record.short_description))\n        fieldList = ['short_description'];\n\n      title = {\n          url: gs.getProperty('glide.servlet.uri') + '/' + \n              gs.getProperty('sn_itsm_va.com.snc.itsm.virtualagent.portal_url') + \n              '?id=form' + \n              '&amp;sys_id=' + approval_for_record.getUniqueValue() +\n              '&amp;table=' + source_table,\n          label: approval_for_record.getDisplayValue()\n      };\n\n      var cardRenderer = new global.VaRecordCardRenderer(true);\n      var fields = cardRenderer.createFields(fieldList, approval_for_record);\n      if (source_table == 'sc_request')\n        fields = fields.concat(reqItemFields);\n      var msg = [];\n      var helper = new sn_itsm_va.ItsmVaHelper();\n      msg.push(helper.convertToLinkMarkdown(title.label, title.url));\n      msg.push('\\n\\n');\n      for (i in fields){\n        var label = fields[i].label;\n        var value = fields[i].value;\n        if(value){\n            msg.push(helper.convertToBoldMarkdown(label));\n            msg.push(' : ');\n            if(fields[i].url)\n                msg.push(helper.convertToLinkMarkdown(value, fields[i].url));\n            else\n                msg.push(value);\n            msg.push('\\n');\n        }\n      }\n\n      return msg.join('');\t\n})();\n\nfunction getRequestedItems(document_id) {\n  var reqItemFields = [];\n  var listRenderer = new global.VaRecordCardRenderer(true);\n  var reqItems = new GlideRecord('sc_req_item');     \n  reqItems.addQuery('request',document_id);\n  reqItems.query();\n  while (reqItems.next())\n    reqItemFields.push(listRenderer.createStaticField(reqItems.cat_item.getDisplayValue(),reqItems.getElement('quantity').getLabel() + ': ' + reqItems.quantity+ ' ' + reqItems.getElement('price').getLabel()+ ': ' + reqItems.price));\n  return reqItemFields;\n\t\n};\n})();(function() {vaInputs.approval_choice.reset();})();ackMsg;"},{"name":"__silent_ScriptedAction_8df29b2ae9514e9d96a264a682e269dc","applicable":"vaVars.previous_graph_node==\"Approval___e1dbce98175f4faa8a3ae08402d8d03e\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Set Approval Sys Id___8df29b2ae9514e9d96a264a682e269dc\";(function execute() {(function execute() {\n    vaVars.approval_sysid = vaInputs.my_approvals;\n})()\n;})();vaInputs.__silent_ScriptedAction_8df29b2ae9514e9d96a264a682e269dc=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Set Approval Sys Id___8df29b2ae9514e9d96a264a682e269dc\";var ackMsg=null;ackMsg=null;vaInputs.__silent_TextOutputPrompt_4dc2c71409704da0a8fc4bf9d95e36e6.reset();(function() {vaInputs.__silent_TextOutputPrompt_4dc2c71409704da0a8fc4bf9d95e36e6.reset();})();ackMsg;"},{"name":"__silent_LibraryCall_58c3d3b3605045819dbbd8a593753be3","applicable":"vaVars.previous_graph_node==\"Cancel___f0940113e7544b42af6e9f44dc94993d\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"No Deflection___58c3d3b3605045819dbbd8a593753be3\";(function execute() {(function execute() {vaSystem.invokeSubTopic('Deflection', JSON.stringify({\"type\":\"LibraryCall\",\"type\":\"LibraryCall\",\"library_topic_name\":\"Deflection\",\"library_topic_id\":\"7fb4ca055303201033cdddeeff7b12b3\",\"parameter-mappings\":[{\"parameter-name\":\"deflection_configuration\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"5292005253213010000dddeeff7b126c\"},\"metadata\":{\"type\":\"Reference\",\"list\":false,\"use_items\":false,\"table\":\"ssa_deflection_configuration\"}},{\"parameter-name\":\"deflection_pattern\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"9ee3409253213010000dddeeff7b123b\"},\"metadata\":{\"type\":\"Reference\",\"list\":false,\"use_items\":false,\"table\":\"ssa_deflection_pattern\"}},{\"parameter-name\":\"activity_table\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"use_items\":false}},{\"parameter-name\":\"activity_ids\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"use_items\":false}}],\"return-value-mappings\":[],\"id\":\"58c3d3b3605045819dbbd8a593753be3\",\"name\":\"No Deflection\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}));})();})();vaInputs.__silent_LibraryCall_58c3d3b3605045819dbbd8a593753be3=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"No Deflection___58c3d3b3605045819dbbd8a593753be3\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_TerminateGoal_035b6b73d39649bba36968565a247b1b.reset();})();ackMsg;"},{"name":"approval_choice","applicable":"vaVars.previous_graph_node==\"Display Task___33ee9f8858d84569a492d8e5bcc72766\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Approval Choice___9c7855bdb6c148b7b10ba3b71f160a9a\";var vaRuntimeUtil = new global.VaTopicRuntimeUtil();var funcObj = {\"customApplies\": function() {return (function() {return true})();},\"applies\": function() {return this.customApplies() &amp;&amp; vaVars.optionsCount_b24246b562764a389283800bb0590f6c &gt; 0;}};(function execute() {var promptMsg=null;if (vaRuntimeUtil.executeFunction(funcObj, 'applies')) {promptMsg = gs.getMessageLang(\"What would you like to do?\", vaContext.getRequesterLang());}else {vaInputs.approval_choice=\"\";}return promptMsg;})();","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":true,"acknowledge_msg":"vaVars.previous_graph_node=\"Approval Choice___9c7855bdb6c148b7b10ba3b71f160a9a\";var ackMsg=null;ackMsg=(function execute() {var vaRuntimeUtil=new global.VaTopicRuntimeUtil();var funcObj={\"customApplies\": function() {return (function() {return true})();},\"applies\": function() {return this.customApplies() &amp;&amp; vaVars.optionsCount_b24246b562764a389283800bb0590f6c &gt; 0;}};var acknowledgeMsg=gs.getMessageLang(\"No records found.\", vaContext.getRequesterLang());if (vaRuntimeUtil.executeFunction(funcObj, 'applies')) {acknowledgeMsg=(function execute() {return null;})();}return acknowledgeMsg;})();(function() {vaInputs.__silent_Branch_0498782b414b406f84c1970968d968d0.reset();})();(function() {vaInputs.__silent_Branch_6caf330dcaa946f8a87ad16dd5515258.reset();})();(function() {vaInputs.__silent_Decision_a65f0d21e5d84b7286940b46a05a1a08.reset();})();(function() {vaInputs.__silent_Branch_51f4b6733ca741ef847d561fb04fde38.reset();})();(function() {vaInputs.__silent_Branch_94991f558f0c421ebd799ac07b89b649.reset();})();ackMsg;"},{"name":"__silent_Decision_a65f0d21e5d84b7286940b46a05a1a08","applicable":"vaVars.previous_graph_node==\"Approval Choice___9c7855bdb6c148b7b10ba3b71f160a9a\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Decision___a65f0d21e5d84b7286940b46a05a1a08\";vaInputs.__silent_Decision_a65f0d21e5d84b7286940b46a05a1a08=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Decision___a65f0d21e5d84b7286940b46a05a1a08\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_Branch_0498782b414b406f84c1970968d968d0.reset();})();(function() {vaInputs.__silent_Branch_6caf330dcaa946f8a87ad16dd5515258.reset();})();(function() {vaInputs.__silent_Branch_51f4b6733ca741ef847d561fb04fde38.reset();})();(function() {vaInputs.__silent_Branch_94991f558f0c421ebd799ac07b89b649.reset();})();ackMsg;"},{"name":"__silent_Branch_51f4b6733ca741ef847d561fb04fde38","applicable":"vaVars.previous_graph_node==\"Decision___a65f0d21e5d84b7286940b46a05a1a08\" &amp;&amp; (function execute() {\n    return vaInputs.approval_choice == 'approve';\n})()\n","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Approve___51f4b6733ca741ef847d561fb04fde38\";vaInputs.__silent_Branch_51f4b6733ca741ef847d561fb04fde38=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Approve___51f4b6733ca741ef847d561fb04fde38\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_CRUDAction_690afe0b102341fe970be8fa908565cf.reset();})();ackMsg;"},{"name":"__silent_Branch_0498782b414b406f84c1970968d968d0","applicable":"vaVars.previous_graph_node==\"Decision___a65f0d21e5d84b7286940b46a05a1a08\" &amp;&amp; (function execute() {\n    return vaInputs.approval_choice == 'reject';\n})()\n","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Reject___0498782b414b406f84c1970968d968d0\";vaInputs.__silent_Branch_0498782b414b406f84c1970968d968d0=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Reject___0498782b414b406f84c1970968d968d0\";var ackMsg=null;ackMsg=null;(function() {vaInputs.reject_comment.reset();})();ackMsg;"},{"name":"__silent_Branch_94991f558f0c421ebd799ac07b89b649","applicable":"vaVars.previous_graph_node==\"Decision___a65f0d21e5d84b7286940b46a05a1a08\" &amp;&amp; (function execute() {\n    return vaInputs.approval_choice == 'back';\n})()\n","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Back___94991f558f0c421ebd799ac07b89b649\";vaInputs.__silent_Branch_94991f558f0c421ebd799ac07b89b649=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Back___94991f558f0c421ebd799ac07b89b649\";var ackMsg=null;ackMsg=null;vaInputs.my_approvals.reset();(function() {vaInputs.my_approvals.reset();})();ackMsg;"},{"name":"__silent_Branch_6caf330dcaa946f8a87ad16dd5515258","applicable":"vaVars.previous_graph_node==\"Decision___a65f0d21e5d84b7286940b46a05a1a08\" &amp;&amp; (function execute() {\n    return vaInputs.approval_choice == 'cancel';\n})()\n","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Cancel___6caf330dcaa946f8a87ad16dd5515258\";vaInputs.__silent_Branch_6caf330dcaa946f8a87ad16dd5515258=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Cancel___6caf330dcaa946f8a87ad16dd5515258\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_LibraryCall_d53f24ece32845fb97ed60d1182d73a0.reset();})();ackMsg;"},{"name":"my_approvals","applicable":"(vaVars.previous_graph_node==\"Back___94991f558f0c421ebd799ac07b89b649\" || vaVars.previous_graph_node==\"Multiple Approval Message___a9bd7446ac2a4352a0867be8655f612a\")","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"My Approvals___ad7b1e242edb4ca793765ae60f2114ce\";var vaRuntimeUtil = new global.VaTopicRuntimeUtil();var funcObj = {\"customApplies\": function() {return (function() {return true})();},\"applies\": function() {return this.customApplies() &amp;&amp; vaVars.optionsCount_57a6b6ec44fc48fda889a6c44089f0e9 &gt; 0;}};(function execute() {var promptMsg=null;if (vaRuntimeUtil.executeFunction(funcObj, 'applies')) {promptMsg = gs.getMessageLang(\"Here are your outstanding approvals.\", vaContext.getRequesterLang());}else {vaInputs.my_approvals=\"\";}return promptMsg;})();","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":true,"acknowledge_msg":"vaVars.previous_graph_node=\"My Approvals___ad7b1e242edb4ca793765ae60f2114ce\";var ackMsg=null;ackMsg=(function execute() {var vaRuntimeUtil=new global.VaTopicRuntimeUtil();var funcObj={\"customApplies\": function() {return (function() {return true})();},\"applies\": function() {return this.customApplies() &amp;&amp; vaVars.optionsCount_57a6b6ec44fc48fda889a6c44089f0e9 &gt; 0;}};var acknowledgeMsg=gs.getMessageLang(\"No records found.\", vaContext.getRequesterLang());if (vaRuntimeUtil.executeFunction(funcObj, 'applies')) {acknowledgeMsg=(function execute() {return null;})();}return acknowledgeMsg;})();(function() {vaInputs.__silent_Branch_f0940113e7544b42af6e9f44dc94993d.reset();})();(function() {vaInputs.__silent_Decision_6ebb189dbf9c44b28e424096bebbbebb.reset();})();(function() {vaInputs.__silent_Branch_e1dbce98175f4faa8a3ae08402d8d03e.reset();})();ackMsg;"},{"name":"__silent_CRUDAction_690afe0b102341fe970be8fa908565cf","applicable":"vaVars.previous_graph_node==\"Approve___51f4b6733ca741ef847d561fb04fde38\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Approve Record___690afe0b102341fe970be8fa908565cf\";(function execute() {(function execute() {var gr = new GlideRecord(\"sysapproval_approver\");\ngr.get(vaInputs.approval_record);\ngr.applyEncodedQuery(\"state=approved\");\ngr.update();\nvaInputs.approval_record = gr;})();})();vaInputs.__silent_CRUDAction_690afe0b102341fe970be8fa908565cf=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Approve Record___690afe0b102341fe970be8fa908565cf\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_ScriptOutputPrompt_2c8b38621bdf46f5896b42756d962b29.reset();})();ackMsg;"},{"name":"reject_comment","applicable":"vaVars.previous_graph_node==\"Reject___0498782b414b406f84c1970968d968d0\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Reject Comment___5ed66b65b05f4b5cbe2bebfbe4bfe2af\";gs.getMessageLang(\"Please enter a reason for your rejection.\", vaContext.getRequesterLang())","input_prompt_format_type":"Text","input_prompt_validaton_script":"","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":true,"acknowledge_msg":"vaVars.previous_graph_node=\"Reject Comment___5ed66b65b05f4b5cbe2bebfbe4bfe2af\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_CRUDAction_91bf14f855844740ab3c84a8ce66f36b.reset();})();ackMsg;"},{"name":"__silent_LibraryCall_d53f24ece32845fb97ed60d1182d73a0","applicable":"vaVars.previous_graph_node==\"Cancel___6caf330dcaa946f8a87ad16dd5515258\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"No Deflection___d53f24ece32845fb97ed60d1182d73a0\";(function execute() {(function execute() {vaSystem.invokeSubTopic('Deflection', JSON.stringify({\"type\":\"LibraryCall\",\"type\":\"LibraryCall\",\"library_topic_name\":\"Deflection\",\"library_topic_id\":\"7fb4ca055303201033cdddeeff7b12b3\",\"parameter-mappings\":[{\"parameter-name\":\"deflection_configuration\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"5292005253213010000dddeeff7b126c\"},\"metadata\":{\"type\":\"Reference\",\"list\":false,\"use_items\":false,\"table\":\"ssa_deflection_configuration\"}},{\"parameter-name\":\"deflection_pattern\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"9ee3409253213010000dddeeff7b123b\"},\"metadata\":{\"type\":\"Reference\",\"list\":false,\"use_items\":false,\"table\":\"ssa_deflection_pattern\"}},{\"parameter-name\":\"activity_table\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"use_items\":false}},{\"parameter-name\":\"activity_ids\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"use_items\":false}}],\"return-value-mappings\":[],\"id\":\"d53f24ece32845fb97ed60d1182d73a0\",\"name\":\"No Deflection\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}));})();})();vaInputs.__silent_LibraryCall_d53f24ece32845fb97ed60d1182d73a0=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"No Deflection___d53f24ece32845fb97ed60d1182d73a0\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_TerminateGoal_035b6b73d39649bba36968565a247b1b.reset();})();ackMsg;"},{"name":"__silent_ScriptOutputPrompt_2c8b38621bdf46f5896b42756d962b29","applicable":"vaVars.previous_graph_node==\"Approve Record___690afe0b102341fe970be8fa908565cf\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Approval Message___2c8b38621bdf46f5896b42756d962b29\";vaInputs.__silent_ScriptOutputPrompt_2c8b38621bdf46f5896b42756d962b29=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Approval Message___2c8b38621bdf46f5896b42756d962b29\";var ackMsg=null;ackMsg=(function execute() {\n   return (function execute() {\n    var gr = new GlideRecordSecure('sysapproval_approver');\n    gr.get(vaVars.approval_sysid);\n    var approval_for_record = null;\n    if ( !gr.source_table.nil()) {\n        approval_for_record = new GlideRecord(gr.source_table);\n        approval_for_record.get( gr.document_id);\n    } else {\n        approval_for_record = new GlideRecord('task');\n        approval_for_record.get(gr.sysapproval);\n    }\n\n    var baseURL = gs.getProperty('glide.servlet.uri') + '/';\n    \n    if(gr.getValue(\"state\") === 'approved')\n        return gs.getMessage('{0} was approved.', approval_for_record.getDisplayValue());\n    else {\n        var task_url = '&lt;a href=\"' + baseURL + gs.getProperty('sn_itsm_va.com.snc.itsm.virtualagent.portal_url') + '?id=approval&amp;table=sysapproval_approver&amp;sys_id=' + vaVars.approval_sysid + '\" target=_blank&gt;' + approval_for_record.getDisplayValue() + '&lt;/a&gt;';\n        return gs.getMessage('There was a problem approving {0}. Please update the record directly.', task_url);\n    }\n        \n})();\n})();(function() {vaInputs.__silent_LibraryCall_3032eb944ed94a58bbf5a659318f757f.reset();})();ackMsg;"},{"name":"__silent_CRUDAction_91bf14f855844740ab3c84a8ce66f36b","applicable":"vaVars.previous_graph_node==\"Reject Comment___5ed66b65b05f4b5cbe2bebfbe4bfe2af\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Reject Record___91bf14f855844740ab3c84a8ce66f36b\";(function execute() {(function execute() {var gr = new GlideRecord(\"sysapproval_approver\");\ngr.get(vaInputs.approval_record);\ngr.applyEncodedQuery(\"state=rejected^comments=\" + vaInputs.reject_comment.getValue());\ngr.update();\nvaInputs.approval_record = gr;})();})();vaInputs.__silent_CRUDAction_91bf14f855844740ab3c84a8ce66f36b=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Reject Record___91bf14f855844740ab3c84a8ce66f36b\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_ScriptOutputPrompt_2beaa589a12649e28b7ad1f09d6ccf75.reset();})();ackMsg;"},{"name":"__silent_LibraryCall_3032eb944ed94a58bbf5a659318f757f","applicable":"vaVars.previous_graph_node==\"Approval Message___2c8b38621bdf46f5896b42756d962b29\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Deflection: Record Approved___3032eb944ed94a58bbf5a659318f757f\";(function execute() {(function execute() {vaSystem.invokeSubTopic('Deflection', JSON.stringify({\"type\":\"LibraryCall\",\"type\":\"LibraryCall\",\"library_topic_name\":\"Deflection\",\"library_topic_id\":\"7fb4ca055303201033cdddeeff7b12b3\",\"parameter-mappings\":[{\"parameter-name\":\"deflection_configuration\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"5292005253213010000dddeeff7b126c\"},\"metadata\":{\"type\":\"Reference\",\"list\":false,\"use_items\":false,\"table\":\"ssa_deflection_configuration\"}},{\"parameter-name\":\"deflection_pattern\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"0273885253213010000dddeeff7b1210\"},\"metadata\":{\"type\":\"Reference\",\"list\":false,\"use_items\":false,\"table\":\"ssa_deflection_pattern\"}},{\"parameter-name\":\"activity_table\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"use_items\":false}},{\"parameter-name\":\"activity_ids\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"use_items\":false}}],\"return-value-mappings\":[],\"id\":\"3032eb944ed94a58bbf5a659318f757f\",\"name\":\"Deflection: Record Approved\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}));})();})();vaInputs.__silent_LibraryCall_3032eb944ed94a58bbf5a659318f757f=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Deflection: Record Approved___3032eb944ed94a58bbf5a659318f757f\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_TerminateGoal_035b6b73d39649bba36968565a247b1b.reset();})();ackMsg;"},{"name":"__silent_ScriptOutputPrompt_2beaa589a12649e28b7ad1f09d6ccf75","applicable":"vaVars.previous_graph_node==\"Reject Record___91bf14f855844740ab3c84a8ce66f36b\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Rejection Message___2beaa589a12649e28b7ad1f09d6ccf75\";vaInputs.__silent_ScriptOutputPrompt_2beaa589a12649e28b7ad1f09d6ccf75=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Rejection Message___2beaa589a12649e28b7ad1f09d6ccf75\";var ackMsg=null;ackMsg=(function execute() {\n   return (function execute() {\n    var gr = new GlideRecordSecure('sysapproval_approver');\n    gr.get(vaVars.approval_sysid);\n    var approval_for_record = null;\n    if ( !gr.source_table.nil()) {\n        approval_for_record = new GlideRecord(gr.source_table);\n        approval_for_record.get( gr.document_id);\n    } else {\n        approval_for_record = new GlideRecord('task');\n        approval_for_record.get(gr.sysapproval);\n    }\n\n    var baseURL = gs.getProperty('glide.servlet.uri') + '/';\n\n    if(gr.getValue('state') === 'rejected')\n        return gs.getMessage('{0} was rejected.', approval_for_record.getDisplayValue());\n    else {\n        var task_url = '&lt;a href=\"' + baseURL + gs.getProperty('sn_itsm_va.com.snc.itsm.virtualagent.portal_url') + '?id=approval&amp;table=sysapproval_approver&amp;sys_id=' + vaVars.approval_sysid + '\" target=_blank&gt;' + approval_for_record.getDisplayValue() + '&lt;/a&gt;';\n        return gs.getMessage('There was a problem rejecting {0}. Please update the record directly.', task_url);\n    }\n        \n})();\n})();(function() {vaInputs.__silent_LibraryCall_37b4903dcfbe4829b84885798fc10376.reset();})();ackMsg;"},{"name":"__silent_LibraryCall_37b4903dcfbe4829b84885798fc10376","applicable":"vaVars.previous_graph_node==\"Rejection Message___2beaa589a12649e28b7ad1f09d6ccf75\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Deflection: Record Rejected___37b4903dcfbe4829b84885798fc10376\";(function execute() {(function execute() {vaSystem.invokeSubTopic('Deflection', JSON.stringify({\"type\":\"LibraryCall\",\"type\":\"LibraryCall\",\"library_topic_name\":\"Deflection\",\"library_topic_id\":\"7fb4ca055303201033cdddeeff7b12b3\",\"parameter-mappings\":[{\"parameter-name\":\"deflection_configuration\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"5292005253213010000dddeeff7b126c\"},\"metadata\":{\"type\":\"Reference\",\"list\":false,\"use_items\":false,\"table\":\"ssa_deflection_configuration\"}},{\"parameter-name\":\"deflection_pattern\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"0273885253213010000dddeeff7b1210\"},\"metadata\":{\"type\":\"Reference\",\"list\":false,\"use_items\":false,\"table\":\"ssa_deflection_pattern\"}},{\"parameter-name\":\"activity_table\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"use_items\":false}},{\"parameter-name\":\"activity_ids\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"use_items\":false}}],\"return-value-mappings\":[],\"id\":\"37b4903dcfbe4829b84885798fc10376\",\"name\":\"Deflection: Record Rejected\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}));})();})();vaInputs.__silent_LibraryCall_37b4903dcfbe4829b84885798fc10376=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Deflection: Record Rejected___37b4903dcfbe4829b84885798fc10376\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_TerminateGoal_035b6b73d39649bba36968565a247b1b.reset();})();ackMsg;"},{"name":"__silent_TerminateGoal_035b6b73d39649bba36968565a247b1b","applicable":"(vaVars.previous_graph_node==\"Deflection: No Approvals___cee9cdf2e1fe4f18aafe14690e9a71c2\" || vaVars.previous_graph_node==\"No Deflection___58c3d3b3605045819dbbd8a593753be3\" || vaVars.previous_graph_node==\"No Deflection___d53f24ece32845fb97ed60d1182d73a0\" || vaVars.previous_graph_node==\"Deflection: Record Approved___3032eb944ed94a58bbf5a659318f757f\" || vaVars.previous_graph_node==\"Deflection: Record Rejected___37b4903dcfbe4829b84885798fc10376\")","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"End___035b6b73d39649bba36968565a247b1b\";vaInputs.__silent_TerminateGoal_035b6b73d39649bba36968565a247b1b=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"End___035b6b73d39649bba36968565a247b1b\";var ackMsg=null;ackMsg=null;vaVars.__segment_trigger_f291cde6a94c45e7843728c8f68785fc_done=true;ackMsg;"}],"variables_update":[]}],"roles":["approver_user"],"active":true,"published":true,"library":false,"expose_on_palette":false,"palette_label":"","flexible_conversation_switching":false,"design_categories":[{"name":"ITSM Self Service","visible":false,"sysId":"3efd22da0b203300a1b16c2367673a10"}],"nlu_provider":"","nlu_model":"","nlu_intent":"","topic_type":"STANDARD","channels":[],"triggerable_by_notification":false,"secure_custom_input_control":false,"score":0.0,"visible":true,"discoverable":true,"sys_scope":"6ead8e780f603200cd674f8ce1050ed1","sys_domain":"global","title":"Report IT Issue","nlu_intent_label":"","nlu_model_label":""}</definition>
        <design_category>3efd22da0b203300a1b16c2367673a10</design_category>
        <discoverable>true</discoverable>
        <expose_on_palette>false</expose_on_palette>
        <fields/>
        <flexible_conversation_switching>false</flexible_conversation_switching>
        <is_system_topic>false</is_system_topic>
        <key_phrases>Report IT Issue approve reject deny approval</key_phrases>
        <last_published_on>2022-10-24 20:53:29</last_published_on>
        <library>false</library>
        <library_usage>null</library_usage>
        <metaphone/>
        <name>Report IT Issue</name>
        <nlu_intent/>
        <nlu_intent_label/>
        <nlu_model/>
        <nlu_model_label/>
        <nlu_provider/>
        <palette_label/>
        <published>true</published>
        <roles>approver_user</roles>
        <secure_custom_input_control>false</secure_custom_input_control>
        <sys_class_name>sys_cs_topic</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2022-10-24 20:53:29</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>0b79b0f097ba11104d66f8971153af21</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>Report IT Issue</sys_name>
        <sys_package display_value="NeedIt" source="x_58872_needit">6ead8e780f603200cd674f8ce1050ed1</sys_package>
        <sys_policy/>
        <sys_scope display_value="NeedIt">6ead8e780f603200cd674f8ce1050ed1</sys_scope>
        <sys_update_name>sys_cs_topic_0b79b0f097ba11104d66f8971153af21</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2022-10-24 20:53:29</sys_updated_on>
        <title>Report IT Issue</title>
        <triggerable_by_notification>false</triggerable_by_notification>
        <type>STANDARD</type>
        <vendor display_value="ServiceNow">c2f0b8f187033200246ddd4c97cb0bb9</vendor>
        <visible>true</visible>
    </sys_cs_topic>
    <sys_variable_value action="DELETE" query="document_key=0b79b0f097ba11104d66f8971153af21"/>
    <sys_update_version action="INSERT_OR_UPDATE">
        <action>DELETE</action>
        <application display_value="NeedIt">6ead8e780f603200cd674f8ce1050ed1</application>
        <file_path/>
        <instance_id>ec54831adb4a19989df22f17d4961915</instance_id>
        <instance_name>dev135869</instance_name>
        <name>sys_cs_topic_0b79b0f097ba11104d66f8971153af21</name>
        <payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cs_topic"><sys_cs_topic action="INSERT_OR_UPDATE"><active>true</active><applicability>true</applicability><autopilot_topic>false</autopilot_topic><cb_topic_id display_value="Report IT Issue">d7d6f83097ba11104d66f8971153af5c</cb_topic_id><channels/><definition>{"id":"d7d6f83097ba11104d66f8971153af5c","name":"Report IT Issue","system_topic":false,"autopilot_topic":false,"vendor_id":"c2f0b8f187033200246ddd4c97cb0bb9","description":"Report IT Issue","applicability":"true","categories":[],"key_phrases":["Report IT Issue","approve","reject","deny","approval"],"variables":[{"name":"approval_sysid","type":"java.lang.Object"},{"name":"count","type":"java.lang.Object","init_value":"0"},{"name":"record_updated","type":"java.lang.Object"},{"name":"results","type":"java.lang.Object"},{"name":"LiveAgent_application","type":"java.lang.Object","init_value":"\"itsm\""},{"name":"optionsCount_57a6b6ec44fc48fda889a6c44089f0e9","type":"java.lang.Object"},{"name":"optionsCount_b24246b562764a389283800bb0590f6c","type":"java.lang.Object"},{"name":"__multipart_total__33ee9f8858d84569a492d8e5bcc72766","type":"java.lang.Object"},{"name":"__multipart_idx__33ee9f8858d84569a492d8e5bcc72766","type":"java.lang.Object"},{"name":"__multipart_valid__33ee9f8858d84569a492d8e5bcc72766","type":"java.lang.Object"},{"name":"__multipart_total__2c8b38621bdf46f5896b42756d962b29","type":"java.lang.Object"},{"name":"__multipart_idx__2c8b38621bdf46f5896b42756d962b29","type":"java.lang.Object"},{"name":"__multipart_valid__2c8b38621bdf46f5896b42756d962b29","type":"java.lang.Object"},{"name":"__multipart_total__2beaa589a12649e28b7ad1f09d6ccf75","type":"java.lang.Object"},{"name":"__multipart_idx__2beaa589a12649e28b7ad1f09d6ccf75","type":"java.lang.Object"},{"name":"__multipart_valid__2beaa589a12649e28b7ad1f09d6ccf75","type":"java.lang.Object"},{"name":"__segment_trigger_f291cde6a94c45e7843728c8f68785fc_done","type":"java.lang.Object","init_value":"false"},{"name":"previous_graph_node","type":"java.lang.Object"}],"fields":[{"type":"ID","name":"my_approvals","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"dynamic_enum_list":{"name":"my_approvals","props":[{"name":"value","isItemValue":true,"isPicture":false},{"name":"label","isItemValue":false,"isPicture":false}]},"binding":{"write_to":[],"enum_list":{"expression":"(function execute() {var vaRuntimeUtil = new global.VaTopicRuntimeUtil();vaVars.optionsCount_57a6b6ec44fc48fda889a6c44089f0e9 = 0; var funcObj = {\"buildOptions\": function() {return (function execute() {\n    var options = JSON.parse(vaVars.results);   \n    options.push({'value':'cancel','label': gs.getMessage(\"I'm done\")});    \n    \n    return options;\n\n})();}};function isValid(option) {return !gs.nil(option) &amp;&amp; !gs.nil(option.value) &amp;&amp; !gs.nil(option.label);}function fixInvalid(invalidOption) {var fixedOption = {'value': 'no_data', 'label': 'no_data'};if (!gs.nil(invalidOption)) {fixedOption.value = !gs.nil(invalidOption.value) ? invalidOption.value : fixedOption.value;fixedOption.label = !gs.nil(invalidOption.label) ? invalidOption.label : fixedOption.label;}return fixedOption;}function normalizeKeys(obj){Object.keys(obj).forEach(function (key) {var k = key.toLowerCase();if (k !== key) {obj[k] = obj[key];delete obj[key];}});return (obj);}var choiceOptions = [];choiceOptions = vaRuntimeUtil.executeFunction(funcObj, 'buildOptions');var noOptions = gs.nil(choiceOptions) || choiceOptions.length==0;if (noOptions) {choiceOptions = [];}else {var invalidCount = 0;var normalizedChoiceOptions = [];for (var i = 0; i &lt; choiceOptions.length; i++) {normalizedChoiceOptions.push(normalizeKeys(choiceOptions[i]));}choiceOptions = normalizedChoiceOptions;for (var i = 0; i &lt; choiceOptions.length; i++) {if (gs.nil(choiceOptions[i].label)) {choiceOptions[i].label = choiceOptions[i].value;}}for (var i = 0; i &lt; choiceOptions.length; i++) {if (!isValid(choiceOptions[i])) {invalidCount++;choiceOptions[i] = fixInvalid(choiceOptions[i]);}}noOptions = invalidCount === choiceOptions.length;if (noOptions) {choiceOptions = [];}vaVars.optionsCount_57a6b6ec44fc48fda889a6c44089f0e9 = choiceOptions.length;return choiceOptions;}})();"}},"metadata_script":""},{"type":"String","name":"reject_comment","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"Reference","table_name":"sysapproval_approver","name":"approval_record","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[]},{"type":"Reference","table_name":"sysapproval_approver","name":"approve_record","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[]},{"type":"Reference","table_name":"","name":"reject_record","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[]},{"type":"Reference","table_name":"sys_user","name":"user","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[]},{"type":"ID","name":"approval_choice","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"dynamic_enum_list":{"name":"approval_choice","props":[{"name":"value","isItemValue":true,"isPicture":false},{"name":"label","isItemValue":false,"isPicture":false}]},"binding":{"write_to":[],"enum_list":{"expression":"(function execute() {var vaRuntimeUtil = new global.VaTopicRuntimeUtil();vaVars.optionsCount_b24246b562764a389283800bb0590f6c = 0; var funcObj = {\"buildOptions\": function() {return (function execute() {\n    var options = [];\n    options.push({'value':'approve','label': gs.getMessage('Approve')});\n    options.push({'value':'reject','label': gs.getMessage('Reject')});\n    if(parseInt(vaVars.count) &gt; 1)\n      options.push({'value':'back','label': gs.getMessage('Go back to approval list')});\n    \n    options.push({'value':'cancel','label': gs.getMessage(\"I'm done\")});\n    \n    return options;\n})()\n;}};function isValid(option) {return !gs.nil(option) &amp;&amp; !gs.nil(option.value) &amp;&amp; !gs.nil(option.label);}function fixInvalid(invalidOption) {var fixedOption = {'value': 'no_data', 'label': 'no_data'};if (!gs.nil(invalidOption)) {fixedOption.value = !gs.nil(invalidOption.value) ? invalidOption.value : fixedOption.value;fixedOption.label = !gs.nil(invalidOption.label) ? invalidOption.label : fixedOption.label;}return fixedOption;}function normalizeKeys(obj){Object.keys(obj).forEach(function (key) {var k = key.toLowerCase();if (k !== key) {obj[k] = obj[key];delete obj[key];}});return (obj);}var choiceOptions = [];choiceOptions = vaRuntimeUtil.executeFunction(funcObj, 'buildOptions');var noOptions = gs.nil(choiceOptions) || choiceOptions.length==0;if (noOptions) {choiceOptions = [];}else {var invalidCount = 0;var normalizedChoiceOptions = [];for (var i = 0; i &lt; choiceOptions.length; i++) {normalizedChoiceOptions.push(normalizeKeys(choiceOptions[i]));}choiceOptions = normalizedChoiceOptions;for (var i = 0; i &lt; choiceOptions.length; i++) {if (gs.nil(choiceOptions[i].label)) {choiceOptions[i].label = choiceOptions[i].value;}}for (var i = 0; i &lt; choiceOptions.length; i++) {if (!isValid(choiceOptions[i])) {invalidCount++;choiceOptions[i] = fixInvalid(choiceOptions[i]);}}noOptions = invalidCount === choiceOptions.length;if (noOptions) {choiceOptions = [];}vaVars.optionsCount_b24246b562764a389283800bb0590f6c = choiceOptions.length;return choiceOptions;}})();"}},"metadata_script":""},{"type":"Boolean","name":"RootDecisionBranch_0f79b0f0b9ba11104aaeaca998fbc920","unique":false,"default_value":"true","key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[]},{"type":"String","name":"__silent_CRUDAction_91bf14f855844740ab3c84a8ce66f36b","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Decision_RootDecision_8b79b0f012ba1110b7b9f3b8af146b20","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_ScriptOutputPrompt_33ee9f8858d84569a492d8e5bcc72766","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Branch_72828d25ada64e8e800945c5c20e03b9","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Branch_94991f558f0c421ebd799ac07b89b649","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Branch_e1dbce98175f4faa8a3ae08402d8d03e","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_StartGoal_f822661de2b549ad8fc26b0840a09936","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Branch_56518f66c59a4365b78f87bba4d1929b","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_TerminateGoal_035b6b73d39649bba36968565a247b1b","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Branch_87a7f2b6ab40456785342fb9b3ba2f2d","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_LibraryCall_58c3d3b3605045819dbbd8a593753be3","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_ScriptOutputPrompt_2c8b38621bdf46f5896b42756d962b29","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_ScriptedAction_9cfcd2ca78774e658dda28c553fef410","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_TextOutputPrompt_a9bd7446ac2a4352a0867be8655f612a","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_LibraryCall_3032eb944ed94a58bbf5a659318f757f","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Decision_a65f0d21e5d84b7286940b46a05a1a08","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Branch_6caf330dcaa946f8a87ad16dd5515258","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Branch_0498782b414b406f84c1970968d968d0","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_ScriptedAction_8df29b2ae9514e9d96a264a682e269dc","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_TextOutputPrompt_7fe448ca1178498c98df5015516a2c3c","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_ScriptOutputPrompt_2beaa589a12649e28b7ad1f09d6ccf75","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_LibraryCall_d53f24ece32845fb97ed60d1182d73a0","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Branch_51f4b6733ca741ef847d561fb04fde38","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Branch_RootDecisionBranch_cb79b0f033ba111030110bc4b7550320","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_CRUDAction_690afe0b102341fe970be8fa908565cf","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_LibraryCall_37b4903dcfbe4829b84885798fc10376","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Decision_7c6792fa7c9e4c7c86dd45503c50aeeb","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_TextOutputPrompt_4dc2c71409704da0a8fc4bf9d95e36e6","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_CRUDAction_b8a3dbc712ce47a194250dea4135e3c1","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Decision_6ebb189dbf9c44b28e424096bebbbebb","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_ScriptedAction_3178521af2bd4f4484a7acb7918d1966","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_LibraryCall_cee9cdf2e1fe4f18aafe14690e9a71c2","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Branch_f0940113e7544b42af6e9f44dc94993d","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_TextOutputPrompt_ddae80ae1c9c42939df50625a05df9d0","unique":false,"key_phrases":[],"mask_type":"NONE","list":false,"static_enum_list":[],"encrypt_if_secure":true}],"actions":[],"tasks":[{"type":"Consumer to system","show_as_button":true,"name":"primary","description":"primary","applicability":"vaVars.__segment_trigger_f291cde6a94c45e7843728c8f68785fc_done==false &amp;&amp; true","mode":"Qmode","key_phrases":[],"greeting_msg":"vaInputs.initialize(\"user\");vaInputs.initialize(\"RootDecisionBranch_0f79b0f0b9ba11104aaeaca998fbc920\");vaInputs.initialize(\"__silent_Decision_6ebb189dbf9c44b28e424096bebbbebb\");vaInputs.initialize(\"__silent_Decision_a65f0d21e5d84b7286940b46a05a1a08\");vaInputs.initialize(\"__silent_Branch_6caf330dcaa946f8a87ad16dd5515258\");vaInputs.initialize(\"__silent_CRUDAction_690afe0b102341fe970be8fa908565cf\");vaInputs.initialize(\"__silent_Branch_RootDecisionBranch_cb79b0f033ba111030110bc4b7550320\");vaInputs.initialize(\"__silent_LibraryCall_37b4903dcfbe4829b84885798fc10376\");vaInputs.initialize(\"reject_comment\");vaInputs.initialize(\"__silent_Branch_87a7f2b6ab40456785342fb9b3ba2f2d\");vaInputs.initialize(\"__silent_ScriptedAction_3178521af2bd4f4484a7acb7918d1966\");vaInputs.initialize(\"__silent_LibraryCall_d53f24ece32845fb97ed60d1182d73a0\");vaInputs.initialize(\"approval_choice\");vaInputs.initialize(\"__silent_LibraryCall_cee9cdf2e1fe4f18aafe14690e9a71c2\");vaInputs.initialize(\"__silent_TextOutputPrompt_ddae80ae1c9c42939df50625a05df9d0\");vaInputs.initialize(\"__silent_Decision_7c6792fa7c9e4c7c86dd45503c50aeeb\");vaInputs.initialize(\"__silent_TerminateGoal_035b6b73d39649bba36968565a247b1b\");vaInputs.initialize(\"__silent_CRUDAction_91bf14f855844740ab3c84a8ce66f36b\");vaInputs.initialize(\"__silent_Branch_0498782b414b406f84c1970968d968d0\");vaInputs.initialize(\"__silent_ScriptOutputPrompt_33ee9f8858d84569a492d8e5bcc72766\");vaInputs.initialize(\"__silent_StartGoal_f822661de2b549ad8fc26b0840a09936\");vaInputs.initialize(\"__silent_Branch_56518f66c59a4365b78f87bba4d1929b\");vaInputs.initialize(\"__silent_Branch_f0940113e7544b42af6e9f44dc94993d\");vaInputs.initialize(\"__silent_LibraryCall_58c3d3b3605045819dbbd8a593753be3\");vaInputs.initialize(\"my_approvals\");vaInputs.initialize(\"__silent_ScriptedAction_9cfcd2ca78774e658dda28c553fef410\");vaInputs.initialize(\"__silent_ScriptOutputPrompt_2c8b38621bdf46f5896b42756d962b29\");vaInputs.initialize(\"__silent_TextOutputPrompt_4dc2c71409704da0a8fc4bf9d95e36e6\");vaInputs.initialize(\"__silent_Branch_51f4b6733ca741ef847d561fb04fde38\");vaInputs.initialize(\"__silent_TextOutputPrompt_7fe448ca1178498c98df5015516a2c3c\");vaInputs.initialize(\"__silent_TextOutputPrompt_a9bd7446ac2a4352a0867be8655f612a\");vaInputs.initialize(\"__silent_ScriptOutputPrompt_2beaa589a12649e28b7ad1f09d6ccf75\");vaInputs.initialize(\"__silent_Branch_94991f558f0c421ebd799ac07b89b649\");vaInputs.initialize(\"__silent_CRUDAction_b8a3dbc712ce47a194250dea4135e3c1\");vaInputs.initialize(\"__silent_Branch_72828d25ada64e8e800945c5c20e03b9\");vaInputs.initialize(\"__silent_LibraryCall_3032eb944ed94a58bbf5a659318f757f\");vaInputs.initialize(\"__silent_ScriptedAction_8df29b2ae9514e9d96a264a682e269dc\");vaInputs.initialize(\"__silent_Branch_e1dbce98175f4faa8a3ae08402d8d03e\");vaInputs.initialize(\"__silent_Decision_RootDecision_8b79b0f012ba1110b7b9f3b8af146b20\");null;","fields":[{"name":"__silent_Decision_RootDecision_8b79b0f012ba1110b7b9f3b8af146b20","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"RootDecision_for_goal_primary___RootDecision_8b79b0f012ba1110b7b9f3b8af146b20\";vaInputs.__silent_Decision_RootDecision_8b79b0f012ba1110b7b9f3b8af146b20=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"RootDecision_for_goal_primary___RootDecision_8b79b0f012ba1110b7b9f3b8af146b20\";var ackMsg=null;ackMsg=null;vaInputs.RootDecisionBranch_0f79b0f0b9ba11104aaeaca998fbc920=true;(function() {vaInputs.__silent_Branch_RootDecisionBranch_cb79b0f033ba111030110bc4b7550320.reset();})();ackMsg;"},{"name":"__silent_Branch_RootDecisionBranch_cb79b0f033ba111030110bc4b7550320","applicable":"vaVars.previous_graph_node==\"RootDecision_for_goal_primary___RootDecision_8b79b0f012ba1110b7b9f3b8af146b20\" &amp;&amp; ((vaInputs.RootDecisionBranch_0f79b0f0b9ba11104aaeaca998fbc920.getValue() == true))","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"RootDecisionBranch_cb79b0f033ba111030110bc4b7550320___RootDecisionBranch_cb79b0f033ba111030110bc4b7550320\";vaInputs.__silent_Branch_RootDecisionBranch_cb79b0f033ba111030110bc4b7550320=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"RootDecisionBranch_cb79b0f033ba111030110bc4b7550320___RootDecisionBranch_cb79b0f033ba111030110bc4b7550320\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_StartGoal_f822661de2b549ad8fc26b0840a09936.reset();})();ackMsg;"},{"name":"__silent_StartGoal_f822661de2b549ad8fc26b0840a09936","applicable":"vaVars.previous_graph_node==\"RootDecisionBranch_cb79b0f033ba111030110bc4b7550320___RootDecisionBranch_cb79b0f033ba111030110bc4b7550320\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Start___f822661de2b549ad8fc26b0840a09936\";vaInputs.__silent_StartGoal_f822661de2b549ad8fc26b0840a09936=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Start___f822661de2b549ad8fc26b0840a09936\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_ScriptedAction_3178521af2bd4f4484a7acb7918d1966.reset();})();ackMsg;"},{"name":"__silent_ScriptedAction_3178521af2bd4f4484a7acb7918d1966","applicable":"vaVars.previous_graph_node==\"Start___f822661de2b549ad8fc26b0840a09936\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Find Approvals___3178521af2bd4f4484a7acb7918d1966\";(function execute() {(function execute() {\n    /*\n     This script finds the requested approvals.\n    */\n    var count = 0;\n    var options = [];\n\n    // find where the user is the delegate.\n    var u = gs.getUserID();\n\tvar answer = new Array();\n\tvar i = 0;\n\tanswer[i++] = new String(u);\n\tvar g = new GlideRecord(\"sys_user_delegate\");\n\tg.addQuery(\"delegate\", u);\n\tg.addQuery(\"approvals\", \"true\");\n\tg.addQuery(\"starts\", \"&lt;=\", gs.daysAgo(0));\n\tg.addQuery(\"ends\", \"&gt;=\", gs.daysAgo(0));\n\tg.query();\n\twhile( g.next())\n\t\tanswer[i++] = new String(g.user);\n\n    var gr = new GlideRecordSecure('sysapproval_approver');\n    gr.addQuery('approver', answer);\n    gr.addQuery('state','requested');\n    gr.query();\n\n    count = gr.getRowCount();\n    vaVars.count = count;\n    if(count != 0) {\n        while(gr.next()) {\n            var document_record = null;\n            var short_description;\n            if (!gr.source_table.nil()) {\n                document_record = new GlideRecord(gr.source_table);\n                document_record.get( gr.document_id);\n                short_description =  document_record.short_description;\n                if (gr.source_table == 'sc_request')\n                   short_description = getReqItems(gr.document_id);\n\n            } else {\n                document_record = new GlideRecord('task');\n                document_record.get(gr.sysapproval);\n                short_description =  document_record.short_description;\n                if (document_record.sys_class_name == 'sc_request')\n                   short_description = getReqItems(gr.sysapproval);\n\n            }\n            options.push({'value': gr.getValue('sys_id'), \n                'label': short_description + ' [' + document_record.getDisplayValue() + ']'});     \n        }\n        vaVars.results = JSON.stringify(options);\n    }\n\n    function getReqItems(parent_id) {\n        var short_description = [];\n        var reqItems = new GlideRecord('sc_req_item');     \n        reqItems.addQuery('request', parent_id);\n        reqItems.query();\n        while (reqItems.next()){\n            if(!(gs.nil(reqItems.cat_item)|| gs.nil(reqItems.cat_item.getDisplayValue())))\n              short_description.push(reqItems.cat_item.getDisplayValue());\n        }\n        \n        var sd = short_description.join(', ');\n        return sd.length &lt; 60 ? sd : sd.substr(0, 60) + '...';\n    }\n    \n    return '';\n})()\n;})();vaInputs.__silent_ScriptedAction_3178521af2bd4f4484a7acb7918d1966=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Find Approvals___3178521af2bd4f4484a7acb7918d1966\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_Branch_87a7f2b6ab40456785342fb9b3ba2f2d.reset();})();(function() {vaInputs.__silent_Branch_56518f66c59a4365b78f87bba4d1929b.reset();})();(function() {vaInputs.__silent_Decision_7c6792fa7c9e4c7c86dd45503c50aeeb.reset();})();(function() {vaInputs.__silent_Branch_72828d25ada64e8e800945c5c20e03b9.reset();})();ackMsg;"},{"name":"__silent_Decision_7c6792fa7c9e4c7c86dd45503c50aeeb","applicable":"vaVars.previous_graph_node==\"Find Approvals___3178521af2bd4f4484a7acb7918d1966\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Decision___7c6792fa7c9e4c7c86dd45503c50aeeb\";vaInputs.__silent_Decision_7c6792fa7c9e4c7c86dd45503c50aeeb=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Decision___7c6792fa7c9e4c7c86dd45503c50aeeb\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_Branch_87a7f2b6ab40456785342fb9b3ba2f2d.reset();})();(function() {vaInputs.__silent_Branch_56518f66c59a4365b78f87bba4d1929b.reset();})();(function() {vaInputs.__silent_Branch_72828d25ada64e8e800945c5c20e03b9.reset();})();ackMsg;"},{"name":"__silent_Branch_87a7f2b6ab40456785342fb9b3ba2f2d","applicable":"vaVars.previous_graph_node==\"Decision___7c6792fa7c9e4c7c86dd45503c50aeeb\" &amp;&amp; (function execute() {\n    return parseInt(vaVars.count) == 0;\n})()\n","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"No Approvals___87a7f2b6ab40456785342fb9b3ba2f2d\";vaInputs.__silent_Branch_87a7f2b6ab40456785342fb9b3ba2f2d=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"No Approvals___87a7f2b6ab40456785342fb9b3ba2f2d\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_TextOutputPrompt_7fe448ca1178498c98df5015516a2c3c.reset();})();ackMsg;"},{"name":"__silent_Branch_56518f66c59a4365b78f87bba4d1929b","applicable":"vaVars.previous_graph_node==\"Decision___7c6792fa7c9e4c7c86dd45503c50aeeb\" &amp;&amp; (function execute() {\n    return parseInt(vaVars.count) &gt; 1;\n})()\n","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Multiple Approvals___56518f66c59a4365b78f87bba4d1929b\";vaInputs.__silent_Branch_56518f66c59a4365b78f87bba4d1929b=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Multiple Approvals___56518f66c59a4365b78f87bba4d1929b\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_TextOutputPrompt_a9bd7446ac2a4352a0867be8655f612a.reset();})();ackMsg;"},{"name":"__silent_Branch_72828d25ada64e8e800945c5c20e03b9","applicable":"vaVars.previous_graph_node==\"Decision___7c6792fa7c9e4c7c86dd45503c50aeeb\" &amp;&amp; (function execute() {\n    return parseInt(vaVars.count) == 1;\n})()\n","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"One Approval___72828d25ada64e8e800945c5c20e03b9\";vaInputs.__silent_Branch_72828d25ada64e8e800945c5c20e03b9=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"One Approval___72828d25ada64e8e800945c5c20e03b9\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_TextOutputPrompt_ddae80ae1c9c42939df50625a05df9d0.reset();})();ackMsg;"},{"name":"__silent_TextOutputPrompt_7fe448ca1178498c98df5015516a2c3c","applicable":"vaVars.previous_graph_node==\"No Approvals___87a7f2b6ab40456785342fb9b3ba2f2d\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"No Approval Message___7fe448ca1178498c98df5015516a2c3c\";vaInputs.__silent_TextOutputPrompt_7fe448ca1178498c98df5015516a2c3c=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"No Approval Message___7fe448ca1178498c98df5015516a2c3c\";var ackMsg=null;ackMsg=(function execute() {var textVariations = [function() { return gs.getMessageLang(\"You have no pending approvals.\", vaContext.getRequesterLang()) }];var index = Math.floor(Math.random() * textVariations.length);return textVariations[index]();})();(function() {vaInputs.__silent_LibraryCall_cee9cdf2e1fe4f18aafe14690e9a71c2.reset();})();ackMsg;","acknowledge_msg_mask_type":"NONE"},{"name":"__silent_TextOutputPrompt_a9bd7446ac2a4352a0867be8655f612a","applicable":"vaVars.previous_graph_node==\"Multiple Approvals___56518f66c59a4365b78f87bba4d1929b\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Multiple Approval Message___a9bd7446ac2a4352a0867be8655f612a\";var promptMsg=null;var applies=(function execute() {\n    return parseInt(vaVars.count) &gt; parseInt(gs.getProperty(\"com.glide.cs.picker_page_limit\", 5));\n})()\n;if(applies){}else{vaInputs.__silent_TextOutputPrompt_a9bd7446ac2a4352a0867be8655f612a=\"\";}vaInputs.__silent_TextOutputPrompt_a9bd7446ac2a4352a0867be8655f612a=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Multiple Approval Message___a9bd7446ac2a4352a0867be8655f612a\";var ackMsg=null;var applies=(function execute() {\n    return parseInt(vaVars.count) &gt; parseInt(gs.getProperty(\"com.glide.cs.picker_page_limit\", 5));\n})()\n;if(applies){ackMsg=(function execute() {var textVariations = [function() { return (function execute() {\n    return gs.getMessage('I just checked and you have {0} outstanding approvals', vaVars.count);\n})()\n }];var index = Math.floor(Math.random() * textVariations.length);return textVariations[index]();})();(function() {vaInputs.my_approvals.reset();})();}else{(function() {vaInputs.my_approvals.reset();})();ackMsg=null;}ackMsg;","acknowledge_msg_mask_type":"NONE"},{"name":"__silent_TextOutputPrompt_ddae80ae1c9c42939df50625a05df9d0","applicable":"vaVars.previous_graph_node==\"One Approval___72828d25ada64e8e800945c5c20e03b9\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"One Approval Message___ddae80ae1c9c42939df50625a05df9d0\";vaInputs.__silent_TextOutputPrompt_ddae80ae1c9c42939df50625a05df9d0=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"One Approval Message___ddae80ae1c9c42939df50625a05df9d0\";var ackMsg=null;ackMsg=(function execute() {var textVariations = [function() { return gs.getMessageLang(\"You only have one approval remaining.\", vaContext.getRequesterLang()) }];var index = Math.floor(Math.random() * textVariations.length);return textVariations[index]();})();(function() {vaInputs.__silent_ScriptedAction_9cfcd2ca78774e658dda28c553fef410.reset();})();ackMsg;","acknowledge_msg_mask_type":"NONE"},{"name":"__silent_LibraryCall_cee9cdf2e1fe4f18aafe14690e9a71c2","applicable":"vaVars.previous_graph_node==\"No Approval Message___7fe448ca1178498c98df5015516a2c3c\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Deflection: No Approvals___cee9cdf2e1fe4f18aafe14690e9a71c2\";(function execute() {(function execute() {vaSystem.invokeSubTopic('Deflection', JSON.stringify({\"type\":\"LibraryCall\",\"type\":\"LibraryCall\",\"library_topic_name\":\"Deflection\",\"library_topic_id\":\"7fb4ca055303201033cdddeeff7b12b3\",\"parameter-mappings\":[{\"parameter-name\":\"deflection_configuration\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"5292005253213010000dddeeff7b126c\"},\"metadata\":{\"type\":\"Reference\",\"list\":false,\"use_items\":false,\"table\":\"ssa_deflection_configuration\"}},{\"parameter-name\":\"deflection_pattern\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"6eb34c5253213010000dddeeff7b12be\"},\"metadata\":{\"type\":\"Reference\",\"list\":false,\"use_items\":false,\"table\":\"ssa_deflection_pattern\"}},{\"parameter-name\":\"activity_table\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"use_items\":false}},{\"parameter-name\":\"activity_ids\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"use_items\":false}}],\"return-value-mappings\":[],\"id\":\"cee9cdf2e1fe4f18aafe14690e9a71c2\",\"name\":\"Deflection: No Approvals\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}));})();})();vaInputs.__silent_LibraryCall_cee9cdf2e1fe4f18aafe14690e9a71c2=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Deflection: No Approvals___cee9cdf2e1fe4f18aafe14690e9a71c2\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_TerminateGoal_035b6b73d39649bba36968565a247b1b.reset();})();ackMsg;"},{"name":"__silent_ScriptedAction_9cfcd2ca78774e658dda28c553fef410","applicable":"vaVars.previous_graph_node==\"One Approval Message___ddae80ae1c9c42939df50625a05df9d0\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Set Approval Sys Id___9cfcd2ca78774e658dda28c553fef410\";(function execute() {(function execute() {\n    var results = JSON.parse(vaVars.results);\n    vaVars.approval_sysid = results[0].value;\n})()\n;})();vaInputs.__silent_ScriptedAction_9cfcd2ca78774e658dda28c553fef410=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Set Approval Sys Id___9cfcd2ca78774e658dda28c553fef410\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_TextOutputPrompt_4dc2c71409704da0a8fc4bf9d95e36e6.reset();})();ackMsg;"},{"name":"__silent_Decision_6ebb189dbf9c44b28e424096bebbbebb","applicable":"vaVars.previous_graph_node==\"My Approvals___ad7b1e242edb4ca793765ae60f2114ce\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Decision___6ebb189dbf9c44b28e424096bebbbebb\";vaInputs.__silent_Decision_6ebb189dbf9c44b28e424096bebbbebb=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Decision___6ebb189dbf9c44b28e424096bebbbebb\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_Branch_f0940113e7544b42af6e9f44dc94993d.reset();})();(function() {vaInputs.__silent_Branch_e1dbce98175f4faa8a3ae08402d8d03e.reset();})();ackMsg;"},{"name":"__silent_Branch_e1dbce98175f4faa8a3ae08402d8d03e","applicable":"vaVars.previous_graph_node==\"Decision___6ebb189dbf9c44b28e424096bebbbebb\" &amp;&amp; (function execute() {\n    return vaVars.count &gt; 0 &amp;&amp; vaInputs.my_approvals != 'cancel';\n})()","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Approval___e1dbce98175f4faa8a3ae08402d8d03e\";vaInputs.__silent_Branch_e1dbce98175f4faa8a3ae08402d8d03e=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Approval___e1dbce98175f4faa8a3ae08402d8d03e\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_ScriptedAction_8df29b2ae9514e9d96a264a682e269dc.reset();})();ackMsg;"},{"name":"__silent_Branch_f0940113e7544b42af6e9f44dc94993d","applicable":"vaVars.previous_graph_node==\"Decision___6ebb189dbf9c44b28e424096bebbbebb\" &amp;&amp; (function execute() {\n    return vaVars.count != '0' &amp;&amp; vaInputs.my_approvals == 'cancel';\n})()\n","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Cancel___f0940113e7544b42af6e9f44dc94993d\";vaInputs.__silent_Branch_f0940113e7544b42af6e9f44dc94993d=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Cancel___f0940113e7544b42af6e9f44dc94993d\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_LibraryCall_58c3d3b3605045819dbbd8a593753be3.reset();})();ackMsg;"},{"name":"__silent_CRUDAction_b8a3dbc712ce47a194250dea4135e3c1","applicable":"vaVars.previous_graph_node==\"Acknowledge Message___4dc2c71409704da0a8fc4bf9d95e36e6\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Approval Record___b8a3dbc712ce47a194250dea4135e3c1\";(function execute() {(function execute() {vaInputs.initialize(\"approval_record\");\nvar gr = new GlideRecord(\"sysapproval_approver\");\ngr.initialize();\ngr.addEncodedQuery(\"sys_id=\" + vaVars.approval_sysid);\ngr.query();\nif (gr.next())\nvaInputs.approval_record = gr;})();})();vaInputs.__silent_CRUDAction_b8a3dbc712ce47a194250dea4135e3c1=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Approval Record___b8a3dbc712ce47a194250dea4135e3c1\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_ScriptOutputPrompt_33ee9f8858d84569a492d8e5bcc72766.reset();})();ackMsg;"},{"name":"__silent_TextOutputPrompt_4dc2c71409704da0a8fc4bf9d95e36e6","applicable":"(vaVars.previous_graph_node==\"Set Approval Sys Id___9cfcd2ca78774e658dda28c553fef410\" || vaVars.previous_graph_node==\"Set Approval Sys Id___8df29b2ae9514e9d96a264a682e269dc\")","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Acknowledge Message___4dc2c71409704da0a8fc4bf9d95e36e6\";vaInputs.__silent_TextOutputPrompt_4dc2c71409704da0a8fc4bf9d95e36e6=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Acknowledge Message___4dc2c71409704da0a8fc4bf9d95e36e6\";var ackMsg=null;ackMsg=(function execute() {var textVariations = [function() { return gs.getMessageLang(\"Here's more information on your approval.\", vaContext.getRequesterLang()) }];var index = Math.floor(Math.random() * textVariations.length);return textVariations[index]();})();(function() {vaInputs.__silent_CRUDAction_b8a3dbc712ce47a194250dea4135e3c1.reset();})();ackMsg;","acknowledge_msg_mask_type":"NONE"},{"name":"__silent_ScriptOutputPrompt_33ee9f8858d84569a492d8e5bcc72766","applicable":"vaVars.previous_graph_node==\"Approval Record___b8a3dbc712ce47a194250dea4135e3c1\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Display Task___33ee9f8858d84569a492d8e5bcc72766\";vaInputs.__silent_ScriptOutputPrompt_33ee9f8858d84569a492d8e5bcc72766=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Display Task___33ee9f8858d84569a492d8e5bcc72766\";var ackMsg=null;ackMsg=(function execute() {\n   return (function execute() { \n\n      var fieldList;\n      var title;\n      var reqItemFields = [];      \n      var gr = vaInputs.approval_record;\n      var source_table;\n      var approval_for_record = null;\n      if ( !gr.source_table.nil()) {\n          source_table = gr.source_table;\n          approval_for_record = new GlideRecord(gr.source_table);\n          approval_for_record.get( gr.document_id);\n      } else {\n          approval_for_record = new GlideRecord('task');\n          approval_for_record.get(gr.sysapproval);\n          source_table = gr.sysapproval.sys_class_name;\n      }\n      \n      if (source_table == 'change_request')\n        fieldList = ['type', 'risk', 'cmdb_ci', 'business_service', 'assignment_group', 'short_description', 'start_date','end_date','category'];\n      \n      else if (source_table == 'sc_request') {\n        fieldList = ['price', 'due_date', 'opened_by'];\n        reqItemFields = getRequestedItems(approval_for_record.getUniqueValue());\n        \n      } else if (source_table == 'kb_knowledge')\n          fieldList = ['kb_knowledge_base', 'kb_category', 'short_description', 'valid_to','author','source'];\n      \n      else if (!gs.nil(approval_for_record.short_description))\n        fieldList = ['short_description'];\n\n      title = {\n          url: gs.getProperty('glide.servlet.uri') + '/' + \n              gs.getProperty('sn_itsm_va.com.snc.itsm.virtualagent.portal_url') + \n              '?id=form' + \n              '&amp;sys_id=' + approval_for_record.getUniqueValue() +\n              '&amp;table=' + source_table,\n          label: approval_for_record.getDisplayValue()\n      };\n\n      var cardRenderer = new global.VaRecordCardRenderer(true);\n      var fields = cardRenderer.createFields(fieldList, approval_for_record);\n      if (source_table == 'sc_request')\n        fields = fields.concat(reqItemFields);\n      var msg = [];\n      var helper = new sn_itsm_va.ItsmVaHelper();\n      msg.push(helper.convertToLinkMarkdown(title.label, title.url));\n      msg.push('\\n\\n');\n      for (i in fields){\n        var label = fields[i].label;\n        var value = fields[i].value;\n        if(value){\n            msg.push(helper.convertToBoldMarkdown(label));\n            msg.push(' : ');\n            if(fields[i].url)\n                msg.push(helper.convertToLinkMarkdown(value, fields[i].url));\n            else\n                msg.push(value);\n            msg.push('\\n');\n        }\n      }\n\n      return msg.join('');\t\n})();\n\nfunction getRequestedItems(document_id) {\n  var reqItemFields = [];\n  var listRenderer = new global.VaRecordCardRenderer(true);\n  var reqItems = new GlideRecord('sc_req_item');     \n  reqItems.addQuery('request',document_id);\n  reqItems.query();\n  while (reqItems.next())\n    reqItemFields.push(listRenderer.createStaticField(reqItems.cat_item.getDisplayValue(),reqItems.getElement('quantity').getLabel() + ': ' + reqItems.quantity+ ' ' + reqItems.getElement('price').getLabel()+ ': ' + reqItems.price));\n  return reqItemFields;\n\t\n};\n})();(function() {vaInputs.approval_choice.reset();})();ackMsg;"},{"name":"__silent_ScriptedAction_8df29b2ae9514e9d96a264a682e269dc","applicable":"vaVars.previous_graph_node==\"Approval___e1dbce98175f4faa8a3ae08402d8d03e\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Set Approval Sys Id___8df29b2ae9514e9d96a264a682e269dc\";(function execute() {(function execute() {\n    vaVars.approval_sysid = vaInputs.my_approvals;\n})()\n;})();vaInputs.__silent_ScriptedAction_8df29b2ae9514e9d96a264a682e269dc=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Set Approval Sys Id___8df29b2ae9514e9d96a264a682e269dc\";var ackMsg=null;ackMsg=null;vaInputs.__silent_TextOutputPrompt_4dc2c71409704da0a8fc4bf9d95e36e6.reset();(function() {vaInputs.__silent_TextOutputPrompt_4dc2c71409704da0a8fc4bf9d95e36e6.reset();})();ackMsg;"},{"name":"__silent_LibraryCall_58c3d3b3605045819dbbd8a593753be3","applicable":"vaVars.previous_graph_node==\"Cancel___f0940113e7544b42af6e9f44dc94993d\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"No Deflection___58c3d3b3605045819dbbd8a593753be3\";(function execute() {(function execute() {vaSystem.invokeSubTopic('Deflection', JSON.stringify({\"type\":\"LibraryCall\",\"type\":\"LibraryCall\",\"library_topic_name\":\"Deflection\",\"library_topic_id\":\"7fb4ca055303201033cdddeeff7b12b3\",\"parameter-mappings\":[{\"parameter-name\":\"deflection_configuration\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"5292005253213010000dddeeff7b126c\"},\"metadata\":{\"type\":\"Reference\",\"list\":false,\"use_items\":false,\"table\":\"ssa_deflection_configuration\"}},{\"parameter-name\":\"deflection_pattern\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"9ee3409253213010000dddeeff7b123b\"},\"metadata\":{\"type\":\"Reference\",\"list\":false,\"use_items\":false,\"table\":\"ssa_deflection_pattern\"}},{\"parameter-name\":\"activity_table\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"use_items\":false}},{\"parameter-name\":\"activity_ids\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"use_items\":false}}],\"return-value-mappings\":[],\"id\":\"58c3d3b3605045819dbbd8a593753be3\",\"name\":\"No Deflection\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}));})();})();vaInputs.__silent_LibraryCall_58c3d3b3605045819dbbd8a593753be3=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"No Deflection___58c3d3b3605045819dbbd8a593753be3\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_TerminateGoal_035b6b73d39649bba36968565a247b1b.reset();})();ackMsg;"},{"name":"approval_choice","applicable":"vaVars.previous_graph_node==\"Display Task___33ee9f8858d84569a492d8e5bcc72766\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Approval Choice___9c7855bdb6c148b7b10ba3b71f160a9a\";var vaRuntimeUtil = new global.VaTopicRuntimeUtil();var funcObj = {\"customApplies\": function() {return (function() {return true})();},\"applies\": function() {return this.customApplies() &amp;&amp; vaVars.optionsCount_b24246b562764a389283800bb0590f6c &gt; 0;}};(function execute() {var promptMsg=null;if (vaRuntimeUtil.executeFunction(funcObj, 'applies')) {promptMsg = gs.getMessageLang(\"What would you like to do?\", vaContext.getRequesterLang());}else {vaInputs.approval_choice=\"\";}return promptMsg;})();","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":true,"acknowledge_msg":"vaVars.previous_graph_node=\"Approval Choice___9c7855bdb6c148b7b10ba3b71f160a9a\";var ackMsg=null;ackMsg=(function execute() {var vaRuntimeUtil=new global.VaTopicRuntimeUtil();var funcObj={\"customApplies\": function() {return (function() {return true})();},\"applies\": function() {return this.customApplies() &amp;&amp; vaVars.optionsCount_b24246b562764a389283800bb0590f6c &gt; 0;}};var acknowledgeMsg=gs.getMessageLang(\"No records found.\", vaContext.getRequesterLang());if (vaRuntimeUtil.executeFunction(funcObj, 'applies')) {acknowledgeMsg=(function execute() {return null;})();}return acknowledgeMsg;})();(function() {vaInputs.__silent_Branch_0498782b414b406f84c1970968d968d0.reset();})();(function() {vaInputs.__silent_Branch_6caf330dcaa946f8a87ad16dd5515258.reset();})();(function() {vaInputs.__silent_Decision_a65f0d21e5d84b7286940b46a05a1a08.reset();})();(function() {vaInputs.__silent_Branch_51f4b6733ca741ef847d561fb04fde38.reset();})();(function() {vaInputs.__silent_Branch_94991f558f0c421ebd799ac07b89b649.reset();})();ackMsg;"},{"name":"__silent_Decision_a65f0d21e5d84b7286940b46a05a1a08","applicable":"vaVars.previous_graph_node==\"Approval Choice___9c7855bdb6c148b7b10ba3b71f160a9a\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Decision___a65f0d21e5d84b7286940b46a05a1a08\";vaInputs.__silent_Decision_a65f0d21e5d84b7286940b46a05a1a08=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Decision___a65f0d21e5d84b7286940b46a05a1a08\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_Branch_0498782b414b406f84c1970968d968d0.reset();})();(function() {vaInputs.__silent_Branch_6caf330dcaa946f8a87ad16dd5515258.reset();})();(function() {vaInputs.__silent_Branch_51f4b6733ca741ef847d561fb04fde38.reset();})();(function() {vaInputs.__silent_Branch_94991f558f0c421ebd799ac07b89b649.reset();})();ackMsg;"},{"name":"__silent_Branch_51f4b6733ca741ef847d561fb04fde38","applicable":"vaVars.previous_graph_node==\"Decision___a65f0d21e5d84b7286940b46a05a1a08\" &amp;&amp; (function execute() {\n    return vaInputs.approval_choice == 'approve';\n})()\n","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Approve___51f4b6733ca741ef847d561fb04fde38\";vaInputs.__silent_Branch_51f4b6733ca741ef847d561fb04fde38=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Approve___51f4b6733ca741ef847d561fb04fde38\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_CRUDAction_690afe0b102341fe970be8fa908565cf.reset();})();ackMsg;"},{"name":"__silent_Branch_0498782b414b406f84c1970968d968d0","applicable":"vaVars.previous_graph_node==\"Decision___a65f0d21e5d84b7286940b46a05a1a08\" &amp;&amp; (function execute() {\n    return vaInputs.approval_choice == 'reject';\n})()\n","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Reject___0498782b414b406f84c1970968d968d0\";vaInputs.__silent_Branch_0498782b414b406f84c1970968d968d0=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Reject___0498782b414b406f84c1970968d968d0\";var ackMsg=null;ackMsg=null;(function() {vaInputs.reject_comment.reset();})();ackMsg;"},{"name":"__silent_Branch_94991f558f0c421ebd799ac07b89b649","applicable":"vaVars.previous_graph_node==\"Decision___a65f0d21e5d84b7286940b46a05a1a08\" &amp;&amp; (function execute() {\n    return vaInputs.approval_choice == 'back';\n})()\n","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Back___94991f558f0c421ebd799ac07b89b649\";vaInputs.__silent_Branch_94991f558f0c421ebd799ac07b89b649=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Back___94991f558f0c421ebd799ac07b89b649\";var ackMsg=null;ackMsg=null;vaInputs.my_approvals.reset();(function() {vaInputs.my_approvals.reset();})();ackMsg;"},{"name":"__silent_Branch_6caf330dcaa946f8a87ad16dd5515258","applicable":"vaVars.previous_graph_node==\"Decision___a65f0d21e5d84b7286940b46a05a1a08\" &amp;&amp; (function execute() {\n    return vaInputs.approval_choice == 'cancel';\n})()\n","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Cancel___6caf330dcaa946f8a87ad16dd5515258\";vaInputs.__silent_Branch_6caf330dcaa946f8a87ad16dd5515258=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Cancel___6caf330dcaa946f8a87ad16dd5515258\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_LibraryCall_d53f24ece32845fb97ed60d1182d73a0.reset();})();ackMsg;"},{"name":"my_approvals","applicable":"(vaVars.previous_graph_node==\"Back___94991f558f0c421ebd799ac07b89b649\" || vaVars.previous_graph_node==\"Multiple Approval Message___a9bd7446ac2a4352a0867be8655f612a\")","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"My Approvals___ad7b1e242edb4ca793765ae60f2114ce\";var vaRuntimeUtil = new global.VaTopicRuntimeUtil();var funcObj = {\"customApplies\": function() {return (function() {return true})();},\"applies\": function() {return this.customApplies() &amp;&amp; vaVars.optionsCount_57a6b6ec44fc48fda889a6c44089f0e9 &gt; 0;}};(function execute() {var promptMsg=null;if (vaRuntimeUtil.executeFunction(funcObj, 'applies')) {promptMsg = gs.getMessageLang(\"Here are your outstanding approvals.\", vaContext.getRequesterLang());}else {vaInputs.my_approvals=\"\";}return promptMsg;})();","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":true,"acknowledge_msg":"vaVars.previous_graph_node=\"My Approvals___ad7b1e242edb4ca793765ae60f2114ce\";var ackMsg=null;ackMsg=(function execute() {var vaRuntimeUtil=new global.VaTopicRuntimeUtil();var funcObj={\"customApplies\": function() {return (function() {return true})();},\"applies\": function() {return this.customApplies() &amp;&amp; vaVars.optionsCount_57a6b6ec44fc48fda889a6c44089f0e9 &gt; 0;}};var acknowledgeMsg=gs.getMessageLang(\"No records found.\", vaContext.getRequesterLang());if (vaRuntimeUtil.executeFunction(funcObj, 'applies')) {acknowledgeMsg=(function execute() {return null;})();}return acknowledgeMsg;})();(function() {vaInputs.__silent_Branch_f0940113e7544b42af6e9f44dc94993d.reset();})();(function() {vaInputs.__silent_Decision_6ebb189dbf9c44b28e424096bebbbebb.reset();})();(function() {vaInputs.__silent_Branch_e1dbce98175f4faa8a3ae08402d8d03e.reset();})();ackMsg;"},{"name":"__silent_CRUDAction_690afe0b102341fe970be8fa908565cf","applicable":"vaVars.previous_graph_node==\"Approve___51f4b6733ca741ef847d561fb04fde38\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Approve Record___690afe0b102341fe970be8fa908565cf\";(function execute() {(function execute() {var gr = new GlideRecord(\"sysapproval_approver\");\ngr.get(vaInputs.approval_record);\ngr.applyEncodedQuery(\"state=approved\");\ngr.update();\nvaInputs.approval_record = gr;})();})();vaInputs.__silent_CRUDAction_690afe0b102341fe970be8fa908565cf=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Approve Record___690afe0b102341fe970be8fa908565cf\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_ScriptOutputPrompt_2c8b38621bdf46f5896b42756d962b29.reset();})();ackMsg;"},{"name":"reject_comment","applicable":"vaVars.previous_graph_node==\"Reject___0498782b414b406f84c1970968d968d0\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Reject Comment___5ed66b65b05f4b5cbe2bebfbe4bfe2af\";gs.getMessageLang(\"Please enter a reason for your rejection.\", vaContext.getRequesterLang())","input_prompt_format_type":"Text","input_prompt_validaton_script":"","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":true,"acknowledge_msg":"vaVars.previous_graph_node=\"Reject Comment___5ed66b65b05f4b5cbe2bebfbe4bfe2af\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_CRUDAction_91bf14f855844740ab3c84a8ce66f36b.reset();})();ackMsg;"},{"name":"__silent_LibraryCall_d53f24ece32845fb97ed60d1182d73a0","applicable":"vaVars.previous_graph_node==\"Cancel___6caf330dcaa946f8a87ad16dd5515258\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"No Deflection___d53f24ece32845fb97ed60d1182d73a0\";(function execute() {(function execute() {vaSystem.invokeSubTopic('Deflection', JSON.stringify({\"type\":\"LibraryCall\",\"type\":\"LibraryCall\",\"library_topic_name\":\"Deflection\",\"library_topic_id\":\"7fb4ca055303201033cdddeeff7b12b3\",\"parameter-mappings\":[{\"parameter-name\":\"deflection_configuration\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"5292005253213010000dddeeff7b126c\"},\"metadata\":{\"type\":\"Reference\",\"list\":false,\"use_items\":false,\"table\":\"ssa_deflection_configuration\"}},{\"parameter-name\":\"deflection_pattern\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"9ee3409253213010000dddeeff7b123b\"},\"metadata\":{\"type\":\"Reference\",\"list\":false,\"use_items\":false,\"table\":\"ssa_deflection_pattern\"}},{\"parameter-name\":\"activity_table\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"use_items\":false}},{\"parameter-name\":\"activity_ids\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"use_items\":false}}],\"return-value-mappings\":[],\"id\":\"d53f24ece32845fb97ed60d1182d73a0\",\"name\":\"No Deflection\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}));})();})();vaInputs.__silent_LibraryCall_d53f24ece32845fb97ed60d1182d73a0=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"No Deflection___d53f24ece32845fb97ed60d1182d73a0\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_TerminateGoal_035b6b73d39649bba36968565a247b1b.reset();})();ackMsg;"},{"name":"__silent_ScriptOutputPrompt_2c8b38621bdf46f5896b42756d962b29","applicable":"vaVars.previous_graph_node==\"Approve Record___690afe0b102341fe970be8fa908565cf\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Approval Message___2c8b38621bdf46f5896b42756d962b29\";vaInputs.__silent_ScriptOutputPrompt_2c8b38621bdf46f5896b42756d962b29=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Approval Message___2c8b38621bdf46f5896b42756d962b29\";var ackMsg=null;ackMsg=(function execute() {\n   return (function execute() {\n    var gr = new GlideRecordSecure('sysapproval_approver');\n    gr.get(vaVars.approval_sysid);\n    var approval_for_record = null;\n    if ( !gr.source_table.nil()) {\n        approval_for_record = new GlideRecord(gr.source_table);\n        approval_for_record.get( gr.document_id);\n    } else {\n        approval_for_record = new GlideRecord('task');\n        approval_for_record.get(gr.sysapproval);\n    }\n\n    var baseURL = gs.getProperty('glide.servlet.uri') + '/';\n    \n    if(gr.getValue(\"state\") === 'approved')\n        return gs.getMessage('{0} was approved.', approval_for_record.getDisplayValue());\n    else {\n        var task_url = '&lt;a href=\"' + baseURL + gs.getProperty('sn_itsm_va.com.snc.itsm.virtualagent.portal_url') + '?id=approval&amp;table=sysapproval_approver&amp;sys_id=' + vaVars.approval_sysid + '\" target=_blank&gt;' + approval_for_record.getDisplayValue() + '&lt;/a&gt;';\n        return gs.getMessage('There was a problem approving {0}. Please update the record directly.', task_url);\n    }\n        \n})();\n})();(function() {vaInputs.__silent_LibraryCall_3032eb944ed94a58bbf5a659318f757f.reset();})();ackMsg;"},{"name":"__silent_CRUDAction_91bf14f855844740ab3c84a8ce66f36b","applicable":"vaVars.previous_graph_node==\"Reject Comment___5ed66b65b05f4b5cbe2bebfbe4bfe2af\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Reject Record___91bf14f855844740ab3c84a8ce66f36b\";(function execute() {(function execute() {var gr = new GlideRecord(\"sysapproval_approver\");\ngr.get(vaInputs.approval_record);\ngr.applyEncodedQuery(\"state=rejected^comments=\" + vaInputs.reject_comment.getValue());\ngr.update();\nvaInputs.approval_record = gr;})();})();vaInputs.__silent_CRUDAction_91bf14f855844740ab3c84a8ce66f36b=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Reject Record___91bf14f855844740ab3c84a8ce66f36b\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_ScriptOutputPrompt_2beaa589a12649e28b7ad1f09d6ccf75.reset();})();ackMsg;"},{"name":"__silent_LibraryCall_3032eb944ed94a58bbf5a659318f757f","applicable":"vaVars.previous_graph_node==\"Approval Message___2c8b38621bdf46f5896b42756d962b29\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Deflection: Record Approved___3032eb944ed94a58bbf5a659318f757f\";(function execute() {(function execute() {vaSystem.invokeSubTopic('Deflection', JSON.stringify({\"type\":\"LibraryCall\",\"type\":\"LibraryCall\",\"library_topic_name\":\"Deflection\",\"library_topic_id\":\"7fb4ca055303201033cdddeeff7b12b3\",\"parameter-mappings\":[{\"parameter-name\":\"deflection_configuration\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"5292005253213010000dddeeff7b126c\"},\"metadata\":{\"type\":\"Reference\",\"list\":false,\"use_items\":false,\"table\":\"ssa_deflection_configuration\"}},{\"parameter-name\":\"deflection_pattern\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"0273885253213010000dddeeff7b1210\"},\"metadata\":{\"type\":\"Reference\",\"list\":false,\"use_items\":false,\"table\":\"ssa_deflection_pattern\"}},{\"parameter-name\":\"activity_table\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"use_items\":false}},{\"parameter-name\":\"activity_ids\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"use_items\":false}}],\"return-value-mappings\":[],\"id\":\"3032eb944ed94a58bbf5a659318f757f\",\"name\":\"Deflection: Record Approved\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}));})();})();vaInputs.__silent_LibraryCall_3032eb944ed94a58bbf5a659318f757f=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Deflection: Record Approved___3032eb944ed94a58bbf5a659318f757f\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_TerminateGoal_035b6b73d39649bba36968565a247b1b.reset();})();ackMsg;"},{"name":"__silent_ScriptOutputPrompt_2beaa589a12649e28b7ad1f09d6ccf75","applicable":"vaVars.previous_graph_node==\"Reject Record___91bf14f855844740ab3c84a8ce66f36b\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Rejection Message___2beaa589a12649e28b7ad1f09d6ccf75\";vaInputs.__silent_ScriptOutputPrompt_2beaa589a12649e28b7ad1f09d6ccf75=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Rejection Message___2beaa589a12649e28b7ad1f09d6ccf75\";var ackMsg=null;ackMsg=(function execute() {\n   return (function execute() {\n    var gr = new GlideRecordSecure('sysapproval_approver');\n    gr.get(vaVars.approval_sysid);\n    var approval_for_record = null;\n    if ( !gr.source_table.nil()) {\n        approval_for_record = new GlideRecord(gr.source_table);\n        approval_for_record.get( gr.document_id);\n    } else {\n        approval_for_record = new GlideRecord('task');\n        approval_for_record.get(gr.sysapproval);\n    }\n\n    var baseURL = gs.getProperty('glide.servlet.uri') + '/';\n\n    if(gr.getValue('state') === 'rejected')\n        return gs.getMessage('{0} was rejected.', approval_for_record.getDisplayValue());\n    else {\n        var task_url = '&lt;a href=\"' + baseURL + gs.getProperty('sn_itsm_va.com.snc.itsm.virtualagent.portal_url') + '?id=approval&amp;table=sysapproval_approver&amp;sys_id=' + vaVars.approval_sysid + '\" target=_blank&gt;' + approval_for_record.getDisplayValue() + '&lt;/a&gt;';\n        return gs.getMessage('There was a problem rejecting {0}. Please update the record directly.', task_url);\n    }\n        \n})();\n})();(function() {vaInputs.__silent_LibraryCall_37b4903dcfbe4829b84885798fc10376.reset();})();ackMsg;"},{"name":"__silent_LibraryCall_37b4903dcfbe4829b84885798fc10376","applicable":"vaVars.previous_graph_node==\"Rejection Message___2beaa589a12649e28b7ad1f09d6ccf75\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Deflection: Record Rejected___37b4903dcfbe4829b84885798fc10376\";(function execute() {(function execute() {vaSystem.invokeSubTopic('Deflection', JSON.stringify({\"type\":\"LibraryCall\",\"type\":\"LibraryCall\",\"library_topic_name\":\"Deflection\",\"library_topic_id\":\"7fb4ca055303201033cdddeeff7b12b3\",\"parameter-mappings\":[{\"parameter-name\":\"deflection_configuration\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"5292005253213010000dddeeff7b126c\"},\"metadata\":{\"type\":\"Reference\",\"list\":false,\"use_items\":false,\"table\":\"ssa_deflection_configuration\"}},{\"parameter-name\":\"deflection_pattern\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"0273885253213010000dddeeff7b1210\"},\"metadata\":{\"type\":\"Reference\",\"list\":false,\"use_items\":false,\"table\":\"ssa_deflection_pattern\"}},{\"parameter-name\":\"activity_table\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"use_items\":false}},{\"parameter-name\":\"activity_ids\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"use_items\":false}}],\"return-value-mappings\":[],\"id\":\"37b4903dcfbe4829b84885798fc10376\",\"name\":\"Deflection: Record Rejected\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}));})();})();vaInputs.__silent_LibraryCall_37b4903dcfbe4829b84885798fc10376=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Deflection: Record Rejected___37b4903dcfbe4829b84885798fc10376\";var ackMsg=null;ackMsg=null;(function() {vaInputs.__silent_TerminateGoal_035b6b73d39649bba36968565a247b1b.reset();})();ackMsg;"},{"name":"__silent_TerminateGoal_035b6b73d39649bba36968565a247b1b","applicable":"(vaVars.previous_graph_node==\"Deflection: No Approvals___cee9cdf2e1fe4f18aafe14690e9a71c2\" || vaVars.previous_graph_node==\"No Deflection___58c3d3b3605045819dbbd8a593753be3\" || vaVars.previous_graph_node==\"No Deflection___d53f24ece32845fb97ed60d1182d73a0\" || vaVars.previous_graph_node==\"Deflection: Record Approved___3032eb944ed94a58bbf5a659318f757f\" || vaVars.previous_graph_node==\"Deflection: Record Rejected___37b4903dcfbe4829b84885798fc10376\")","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"End___035b6b73d39649bba36968565a247b1b\";vaInputs.__silent_TerminateGoal_035b6b73d39649bba36968565a247b1b=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"End___035b6b73d39649bba36968565a247b1b\";var ackMsg=null;ackMsg=null;vaVars.__segment_trigger_f291cde6a94c45e7843728c8f68785fc_done=true;ackMsg;"}],"variables_update":[]}],"roles":["approver_user"],"active":true,"published":true,"library":false,"expose_on_palette":false,"palette_label":"","flexible_conversation_switching":false,"design_categories":[{"name":"ITSM Self Service","visible":false,"sysId":"3efd22da0b203300a1b16c2367673a10"}],"nlu_provider":"","nlu_model":"","nlu_intent":"","topic_type":"STANDARD","channels":[],"triggerable_by_notification":false,"secure_custom_input_control":false,"score":0.0,"visible":true,"discoverable":true,"sys_scope":"6ead8e780f603200cd674f8ce1050ed1","sys_domain":"global","title":"Report IT Issue","nlu_intent_label":"","nlu_model_label":""}</definition><design_category>3efd22da0b203300a1b16c2367673a10</design_category><discoverable>true</discoverable><expose_on_palette>false</expose_on_palette><fields/><flexible_conversation_switching>false</flexible_conversation_switching><is_system_topic>false</is_system_topic><key_phrases>Report IT Issue approve reject deny approval</key_phrases><last_published_on>2022-10-24 20:53:29</last_published_on><library>false</library><library_usage>null</library_usage><metaphone/><name>Report IT Issue</name><nlu_intent/><nlu_intent_label/><nlu_model/><nlu_model_label/><nlu_provider/><palette_label/><published>true</published><roles>approver_user</roles><secure_custom_input_control>false</secure_custom_input_control><sys_class_name>sys_cs_topic</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2022-10-24 20:53:29</sys_created_on><sys_domain>global</sys_domain><sys_id>0b79b0f097ba11104d66f8971153af21</sys_id><sys_mod_count>0</sys_mod_count><sys_name>Report IT Issue</sys_name><sys_package display_value="NeedIt" source="x_58872_needit">6ead8e780f603200cd674f8ce1050ed1</sys_package><sys_policy/><sys_scope display_value="NeedIt">6ead8e780f603200cd674f8ce1050ed1</sys_scope><sys_update_name>sys_cs_topic_0b79b0f097ba11104d66f8971153af21</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2022-10-24 20:53:29</sys_updated_on><title>Report IT Issue</title><triggerable_by_notification>false</triggerable_by_notification><type>STANDARD</type><vendor display_value="ServiceNow">c2f0b8f187033200246ddd4c97cb0bb9</vendor><visible>true</visible></sys_cs_topic><sys_variable_value action="delete_multiple" query="document_key=0b79b0f097ba11104d66f8971153af21"/></record_update>]]></payload>
        <payload_hash>252146004</payload_hash>
        <record_name>Report IT Issue</record_name>
        <reverted_from/>
        <source>63b2eef2971211104d66f8971153af21</source>
        <source_table>sys_update_set</source_table>
        <state>previous</state>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2022-10-24 20:53:29</sys_created_on>
        <sys_id>4779b0f097ba11104d66f8971153af26</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_recorded_at>1840bc598e90000001</sys_recorded_at>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2022-10-24 20:53:29</sys_updated_on>
        <type>Topic</type>
        <update_guid>8f79b0f056ba111033976c05f5775125</update_guid>
        <update_guid_history>8f79b0f056ba111033976c05f5775125:252146004</update_guid_history>
    </sys_update_version>
    <sys_metadata_delete action="INSERT_OR_UPDATE">
        <sys_audit_delete/>
        <sys_class_name>sys_metadata_delete</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2022-10-24 22:07:15</sys_created_on>
        <sys_db_object display_value="" name="sys_cs_topic">sys_cs_topic</sys_db_object>
        <sys_id>167ef0c87dd449d49458041054ab6f89</sys_id>
        <sys_metadata>0b79b0f097ba11104d66f8971153af21</sys_metadata>
        <sys_name>Report IT Issue</sys_name>
        <sys_package display_value="NeedIt" source="x_58872_needit">6ead8e780f603200cd674f8ce1050ed1</sys_package>
        <sys_parent/>
        <sys_policy/>
        <sys_scope display_value="NeedIt">6ead8e780f603200cd674f8ce1050ed1</sys_scope>
        <sys_scope_delete display_value="">94872a8897db403e8ee69a431de2fca4</sys_scope_delete>
        <sys_update_name>sys_cs_topic_0b79b0f097ba11104d66f8971153af21</sys_update_name>
        <sys_update_version display_value="sys_cs_topic_0b79b0f097ba11104d66f8971153af21">4779b0f097ba11104d66f8971153af26</sys_update_version>
    </sys_metadata_delete>
</record_update>
